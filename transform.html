<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Transformación de datos | R para Ciencia de Datos</title>
  <meta name="description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Así podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Transformación de datos | R para Ciencia de Datos" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://es.r4ds.hadley.nz/" />
  <meta property="og:image" content="http://es.r4ds.hadley.nz/cover.png" />
  <meta property="og:description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Así podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="github-repo" content="cienciadedatos/r4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Transformación de datos | R para Ciencia de Datos" />
  
  <meta name="twitter:description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Así podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="twitter:image" content="http://es.r4ds.hadley.nz/cover.png" />

<meta name="author" content="Garrett Grolemund" />
<meta name="author" content="Hadley Wickham" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="flujo-de-trabajo-conocimientos-básicos.html"/>
<link rel="next" href="flujo-de-trabajo-scripts.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="r4ds.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R para Ciencia de Datos</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenida</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-traducción"><i class="fa fa-check"></i>Sobre la traducción</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-versión-original-en-inglés"><i class="fa fa-check"></i>Sobre la versión original en inglés</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="introducción.html"><a href="introducción.html#lo-que-aprenderás"><i class="fa fa-check"></i><b>1.1</b> Lo que aprenderás</a></li>
<li class="chapter" data-level="1.2" data-path="introducción.html"><a href="introducción.html#cómo-está-organizado-este-libro"><i class="fa fa-check"></i><b>1.2</b> Cómo está organizado este libro</a></li>
<li class="chapter" data-level="1.3" data-path="introducción.html"><a href="introducción.html#qué-no-vas-a-aprender"><i class="fa fa-check"></i><b>1.3</b> Qué no vas a aprender</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introducción.html"><a href="introducción.html#big-data"><i class="fa fa-check"></i><b>1.3.1</b> Big data</a></li>
<li class="chapter" data-level="1.3.2" data-path="introducción.html"><a href="introducción.html#python-julia-y-amigos"><i class="fa fa-check"></i><b>1.3.2</b> Python, Julia y amigos</a></li>
<li class="chapter" data-level="1.3.3" data-path="introducción.html"><a href="introducción.html#datos-no-rectangulares"><i class="fa fa-check"></i><b>1.3.3</b> Datos no rectangulares</a></li>
<li class="chapter" data-level="1.3.4" data-path="introducción.html"><a href="introducción.html#confirmación-de-hipótesis"><i class="fa fa-check"></i><b>1.3.4</b> Confirmación de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introducción.html"><a href="introducción.html#prerrequisitos"><i class="fa fa-check"></i><b>1.4</b> Prerrequisitos</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introducción.html"><a href="introducción.html#r"><i class="fa fa-check"></i><b>1.4.1</b> R</a></li>
<li class="chapter" data-level="1.4.2" data-path="introducción.html"><a href="introducción.html#rstudio"><i class="fa fa-check"></i><b>1.4.2</b> RStudio</a></li>
<li class="chapter" data-level="1.4.3" data-path="introducción.html"><a href="introducción.html#el-tidyverse"><i class="fa fa-check"></i><b>1.4.3</b> El Tidyverse</a></li>
<li class="chapter" data-level="1.4.4" data-path="introducción.html"><a href="introducción.html#el-paquete-datos"><i class="fa fa-check"></i><b>1.4.4</b> El paquete <code>datos</code></a></li>
<li class="chapter" data-level="1.4.5" data-path="introducción.html"><a href="introducción.html#otros-paquetes"><i class="fa fa-check"></i><b>1.4.5</b> Otros paquetes</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introducción.html"><a href="introducción.html#ejecutar-código-en-r"><i class="fa fa-check"></i><b>1.5</b> Ejecutar código en R</a></li>
<li class="chapter" data-level="1.6" data-path="introducción.html"><a href="introducción.html#pedir-ayuda-y-aprender-más"><i class="fa fa-check"></i><b>1.6</b> Pedir ayuda y aprender más</a></li>
<li class="chapter" data-level="1.7" data-path="introducción.html"><a href="introducción.html#agradecimientos"><i class="fa fa-check"></i><b>1.7</b> Agradecimientos</a></li>
<li class="chapter" data-level="1.8" data-path="introducción.html"><a href="introducción.html#colofón"><i class="fa fa-check"></i><b>1.8</b> Colofón</a></li>
</ul></li>
<li class="part"><span><b>I Explorar</b></span></li>
<li class="chapter" data-level="2" data-path="explorar-introduccion.html"><a href="explorar-introduccion.html"><i class="fa fa-check"></i><b>2</b> Introducción</a></li>
<li class="chapter" data-level="3" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a><ul>
<li class="chapter" data-level="3.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#introducción-1"><i class="fa fa-check"></i><b>3.1</b> Introducción</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#prerrequisitos-1"><i class="fa fa-check"></i><b>3.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#el-data-frame-millas"><i class="fa fa-check"></i><b>3.2.1</b> El <em>data frame</em> <code>millas</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#creando-un-gráfico-con-ggplot"><i class="fa fa-check"></i><b>3.2.2</b> Creando un gráfico con ggplot</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#una-plantilla-de-gráficos"><i class="fa fa-check"></i><b>3.2.3</b> Una plantilla de gráficos</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios"><i class="fa fa-check"></i><b>3.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#mapeos-estéticos"><i class="fa fa-check"></i><b>3.3</b> Mapeos estéticos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-1"><i class="fa fa-check"></i><b>3.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#problemas-comunes"><i class="fa fa-check"></i><b>3.4</b> Problemas comunes</a></li>
<li class="chapter" data-level="3.5" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#separar-en-facetas"><i class="fa fa-check"></i><b>3.5</b> Separar en facetas</a><ul>
<li class="chapter" data-level="3.5.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-2"><i class="fa fa-check"></i><b>3.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#objetos-geométricos"><i class="fa fa-check"></i><b>3.6</b> Objetos geométricos</a><ul>
<li class="chapter" data-level="3.6.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-3"><i class="fa fa-check"></i><b>3.6.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#transformaciones-estadísticas"><i class="fa fa-check"></i><b>3.7</b> Transformaciones estadísticas</a><ul>
<li class="chapter" data-level="3.7.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-4"><i class="fa fa-check"></i><b>3.7.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ajustes-de-posición"><i class="fa fa-check"></i><b>3.8</b> Ajustes de posición</a><ul>
<li class="chapter" data-level="3.8.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-5"><i class="fa fa-check"></i><b>3.8.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#sistemas-de-coordenadas"><i class="fa fa-check"></i><b>3.9</b> Sistemas de coordenadas</a><ul>
<li class="chapter" data-level="3.9.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-6"><i class="fa fa-check"></i><b>3.9.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#la-gramática-de-gráficos-en-capas"><i class="fa fa-check"></i><b>3.10</b> La gramática de gráficos en capas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html"><i class="fa fa-check"></i><b>4</b> Flujo de trabajo: conocimientos básicos</a><ul>
<li class="chapter" data-level="4.1" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html#conocimientos-básicos-de-programación"><i class="fa fa-check"></i><b>4.1</b> Conocimientos básicos de programación</a></li>
<li class="chapter" data-level="4.2" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html#la-importancia-de-los-nombres"><i class="fa fa-check"></i><b>4.2</b> La importancia de los nombres</a></li>
<li class="chapter" data-level="4.3" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html#usando-funciones"><i class="fa fa-check"></i><b>4.3</b> Usando funciones</a></li>
<li class="chapter" data-level="4.4" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html#ejercicios-7"><i class="fa fa-check"></i><b>4.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transformación de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introducción-2"><i class="fa fa-check"></i><b>5.1</b> Introducción</a><ul>
<li class="chapter" data-level="5.1.1" data-path="transform.html"><a href="transform.html#prerequisitos"><i class="fa fa-check"></i><b>5.1.1</b> Prerequisitos</a></li>
<li class="chapter" data-level="5.1.2" data-path="transform.html"><a href="transform.html#vuelos"><i class="fa fa-check"></i><b>5.1.2</b> vuelos</a></li>
<li class="chapter" data-level="5.1.3" data-path="transform.html"><a href="transform.html#lo-básico-de-dplyr"><i class="fa fa-check"></i><b>5.1.3</b> Lo básico de <strong>dplyr</strong></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#filtrar-filas-con-filter"><i class="fa fa-check"></i><b>5.2</b> Filtrar filas con <code>filter()</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="transform.html"><a href="transform.html#comparaciones"><i class="fa fa-check"></i><b>5.2.1</b> Comparaciones</a></li>
<li class="chapter" data-level="5.2.2" data-path="transform.html"><a href="transform.html#operadores-lógicos"><i class="fa fa-check"></i><b>5.2.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="5.2.3" data-path="transform.html"><a href="transform.html#valores-faltantes"><i class="fa fa-check"></i><b>5.2.3</b> Valores faltantes</a></li>
<li class="chapter" data-level="5.2.4" data-path="transform.html"><a href="transform.html#ejercicios-8"><i class="fa fa-check"></i><b>5.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#reordenar-las-filas-con-arrange"><i class="fa fa-check"></i><b>5.3</b> Reordenar las filas con <code>arrange()</code></a><ul>
<li class="chapter" data-level="5.3.1" data-path="transform.html"><a href="transform.html#ejercicios-9"><i class="fa fa-check"></i><b>5.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> Seleccionar columnas con <code>select()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="transform.html"><a href="transform.html#ejercicios-10"><i class="fa fa-check"></i><b>5.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#añadir-nuevas-variables-con-mutate"><i class="fa fa-check"></i><b>5.5</b> Añadir nuevas variables con <code>mutate()</code></a><ul>
<li class="chapter" data-level="5.5.1" data-path="transform.html"><a href="transform.html#mutate-funs"><i class="fa fa-check"></i><b>5.5.1</b> Funciones de creación útiles</a></li>
<li class="chapter" data-level="5.5.2" data-path="transform.html"><a href="transform.html#ejercicios-11"><i class="fa fa-check"></i><b>5.5.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#resúmenes-agrupados-con-summarise"><i class="fa fa-check"></i><b>5.6</b> Resúmenes agrupados con <code>summarise()</code></a><ul>
<li class="chapter" data-level="5.6.1" data-path="transform.html"><a href="transform.html#combinación-de-múltiples-operaciones-con-el-pipe"><i class="fa fa-check"></i><b>5.6.1</b> Combinación de múltiples operaciones con el <em>pipe</em></a></li>
<li class="chapter" data-level="5.6.2" data-path="transform.html"><a href="transform.html#valores-faltantes-1"><i class="fa fa-check"></i><b>5.6.2</b> Valores faltantes</a></li>
<li class="chapter" data-level="5.6.3" data-path="transform.html"><a href="transform.html#conteos"><i class="fa fa-check"></i><b>5.6.3</b> Conteos</a></li>
<li class="chapter" data-level="5.6.4" data-path="transform.html"><a href="transform.html#summarise-funs"><i class="fa fa-check"></i><b>5.6.4</b> Funciones de resumen útiles</a></li>
<li class="chapter" data-level="5.6.5" data-path="transform.html"><a href="transform.html#agrupación-por-múltiples-variables"><i class="fa fa-check"></i><b>5.6.5</b> Agrupación por múltiples variables</a></li>
<li class="chapter" data-level="5.6.6" data-path="transform.html"><a href="transform.html#desagrupar"><i class="fa fa-check"></i><b>5.6.6</b> Desagrupar</a></li>
<li class="chapter" data-level="5.6.7" data-path="transform.html"><a href="transform.html#ejercicios-12"><i class="fa fa-check"></i><b>5.6.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#transformaciones-agrupadas-y-filtros"><i class="fa fa-check"></i><b>5.7</b> Transformaciones agrupadas (y filtros)</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#ejercicios-13"><i class="fa fa-check"></i><b>5.7.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html"><i class="fa fa-check"></i><b>6</b> Flujo de trabajo: <em>Scripts</em></a><ul>
<li class="chapter" data-level="6.1" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#ejecutando-código"><i class="fa fa-check"></i><b>6.1</b> Ejecutando código</a></li>
<li class="chapter" data-level="6.2" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#diagnósticos-de-rstudio"><i class="fa fa-check"></i><b>6.2</b> Diagnósticos de RStudio</a></li>
<li class="chapter" data-level="6.3" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#ejercicios-14"><i class="fa fa-check"></i><b>6.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html"><i class="fa fa-check"></i><b>7</b> Análisis exploratorio de datos (<em>EDA</em>)</a><ul>
<li class="chapter" data-level="7.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#introducción-3"><i class="fa fa-check"></i><b>7.1</b> Introducción</a><ul>
<li class="chapter" data-level="7.1.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#requisitos-indispensables"><i class="fa fa-check"></i><b>7.1.1</b> Requisitos indispensables</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#preguntas"><i class="fa fa-check"></i><b>7.2</b> Preguntas</a></li>
<li class="chapter" data-level="7.3" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#variación"><i class="fa fa-check"></i><b>7.3</b> Variación</a><ul>
<li class="chapter" data-level="7.3.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#visualizando-distribuciones"><i class="fa fa-check"></i><b>7.3.1</b> Visualizando distribuciones</a></li>
<li class="chapter" data-level="7.3.2" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#valores-típicos"><i class="fa fa-check"></i><b>7.3.2</b> Valores típicos</a></li>
<li class="chapter" data-level="7.3.3" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#valores-inusuales"><i class="fa fa-check"></i><b>7.3.3</b> Valores inusuales</a></li>
<li class="chapter" data-level="7.3.4" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-15"><i class="fa fa-check"></i><b>7.3.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#valores-faltantes-2"><i class="fa fa-check"></i><b>7.4</b> Valores faltantes</a><ul>
<li class="chapter" data-level="7.4.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-16"><i class="fa fa-check"></i><b>7.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#covariación"><i class="fa fa-check"></i><b>7.5</b> Covariación</a><ul>
<li class="chapter" data-level="7.5.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#cat-cont"><i class="fa fa-check"></i><b>7.5.1</b> Una variable categórica y una variable continua</a></li>
<li class="chapter" data-level="7.5.2" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#dos-variables-categóricas"><i class="fa fa-check"></i><b>7.5.2</b> Dos variables categóricas</a></li>
<li class="chapter" data-level="7.5.3" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#dos-variables-continuas"><i class="fa fa-check"></i><b>7.5.3</b> Dos variables continuas</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#patrones-y-modelos"><i class="fa fa-check"></i><b>7.6</b> Patrones y modelos</a></li>
<li class="chapter" data-level="7.7" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#argumentos-en-ggplot2"><i class="fa fa-check"></i><b>7.7</b> Argumentos en ggplot2</a></li>
<li class="chapter" data-level="7.8" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#aprendiendo-más"><i class="fa fa-check"></i><b>7.8</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html"><i class="fa fa-check"></i><b>8</b> Flujo de trabajo: proyectos</a><ul>
<li class="chapter" data-level="8.1" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#qué-es-real"><i class="fa fa-check"></i><b>8.1</b> ¿Qué es real?</a></li>
<li class="chapter" data-level="8.2" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#dónde-vive-tu-análisis"><i class="fa fa-check"></i><b>8.2</b> ¿Dónde vive tu análisis?</a></li>
<li class="chapter" data-level="8.3" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#rutas-y-directorios"><i class="fa fa-check"></i><b>8.3</b> Rutas y directorios</a></li>
<li class="chapter" data-level="8.4" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#proyectos-en-rstudio"><i class="fa fa-check"></i><b>8.4</b> Proyectos en RStudio</a></li>
<li class="chapter" data-level="8.5" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#resumen"><i class="fa fa-check"></i><b>8.5</b> Resumen</a></li>
</ul></li>
<li class="part"><span><b>II Manejar o domar datos</b></span></li>
<li class="chapter" data-level="9" data-path="domardatos-intro.html"><a href="domardatos-intro.html"><i class="fa fa-check"></i><b>9</b> Introducción</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="10.1" data-path="tibbles.html"><a href="tibbles.html#introducción-4"><i class="fa fa-check"></i><b>10.1</b> Introducción</a><ul>
<li class="chapter" data-level="10.1.1" data-path="tibbles.html"><a href="tibbles.html#prerrequisitos-2"><i class="fa fa-check"></i><b>10.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tibbles.html"><a href="tibbles.html#creando-tibbles"><i class="fa fa-check"></i><b>10.2</b> Creando tibbles</a></li>
<li class="chapter" data-level="10.3" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs.data.frame"><i class="fa fa-check"></i><b>10.3</b> Tibbles vs. data.frame</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tibbles.html"><a href="tibbles.html#impresión-en-la-consola"><i class="fa fa-check"></i><b>10.3.1</b> Impresión en la consola</a></li>
<li class="chapter" data-level="10.3.2" data-path="tibbles.html"><a href="tibbles.html#selección-de-subconjuntos"><i class="fa fa-check"></i><b>10.3.2</b> Selección de subconjuntos</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tibbles.html"><a href="tibbles.html#interactuando-con-código-antiguo"><i class="fa fa-check"></i><b>10.4</b> Interactuando con código antiguo</a></li>
<li class="chapter" data-level="10.5" data-path="tibbles.html"><a href="tibbles.html#ejercicios-20"><i class="fa fa-check"></i><b>10.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="importación-de-datos.html"><a href="importación-de-datos.html"><i class="fa fa-check"></i><b>11</b> Importación de datos</a><ul>
<li class="chapter" data-level="11.1" data-path="importación-de-datos.html"><a href="importación-de-datos.html#introducción-5"><i class="fa fa-check"></i><b>11.1</b> Introducción</a><ul>
<li class="chapter" data-level="11.1.1" data-path="importación-de-datos.html"><a href="importación-de-datos.html#prerrequisitos-3"><i class="fa fa-check"></i><b>11.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="importación-de-datos.html"><a href="importación-de-datos.html#comenzando"><i class="fa fa-check"></i><b>11.2</b> Comenzando</a><ul>
<li class="chapter" data-level="11.2.1" data-path="importación-de-datos.html"><a href="importación-de-datos.html#comparación-con-r-base"><i class="fa fa-check"></i><b>11.2.1</b> Comparación con R base</a></li>
<li class="chapter" data-level="11.2.2" data-path="importación-de-datos.html"><a href="importación-de-datos.html#ejercicios-21"><i class="fa fa-check"></i><b>11.2.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="importación-de-datos.html"><a href="importación-de-datos.html#segmentar-un-vector"><i class="fa fa-check"></i><b>11.3</b> Segmentar un vector</a><ul>
<li class="chapter" data-level="11.3.1" data-path="importación-de-datos.html"><a href="importación-de-datos.html#números"><i class="fa fa-check"></i><b>11.3.1</b> Números</a></li>
<li class="chapter" data-level="11.3.2" data-path="importación-de-datos.html"><a href="importación-de-datos.html#readr-strings"><i class="fa fa-check"></i><b>11.3.2</b> Cadenas de texto (<em>strings</em>)</a></li>
<li class="chapter" data-level="11.3.3" data-path="importación-de-datos.html"><a href="importación-de-datos.html#readr-factors"><i class="fa fa-check"></i><b>11.3.3</b> Factores</a></li>
<li class="chapter" data-level="11.3.4" data-path="importación-de-datos.html"><a href="importación-de-datos.html#readr-datetimes"><i class="fa fa-check"></i><b>11.3.4</b> Fechas, fechas-horas, y horas</a></li>
<li class="chapter" data-level="11.3.5" data-path="importación-de-datos.html"><a href="importación-de-datos.html#ejercicios-22"><i class="fa fa-check"></i><b>11.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="importación-de-datos.html"><a href="importación-de-datos.html#segmentar-un-archivo"><i class="fa fa-check"></i><b>11.4</b> Segmentar un archivo</a><ul>
<li class="chapter" data-level="11.4.1" data-path="importación-de-datos.html"><a href="importación-de-datos.html#estrategia"><i class="fa fa-check"></i><b>11.4.1</b> Estrategia</a></li>
<li class="chapter" data-level="11.4.2" data-path="importación-de-datos.html"><a href="importación-de-datos.html#problemas"><i class="fa fa-check"></i><b>11.4.2</b> Problemas</a></li>
<li class="chapter" data-level="11.4.3" data-path="importación-de-datos.html"><a href="importación-de-datos.html#otras-estrategias"><i class="fa fa-check"></i><b>11.4.3</b> Otras estrategias</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="importación-de-datos.html"><a href="importación-de-datos.html#escribir-a-un-archivo"><i class="fa fa-check"></i><b>11.5</b> Escribir a un archivo</a></li>
<li class="chapter" data-level="11.6" data-path="importación-de-datos.html"><a href="importación-de-datos.html#otros-tipos-de-datos"><i class="fa fa-check"></i><b>11.6</b> Otros tipos de datos</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="datos-ordenados.html"><a href="datos-ordenados.html"><i class="fa fa-check"></i><b>12</b> Datos ordenados</a><ul>
<li class="chapter" data-level="12.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#introducción-6"><i class="fa fa-check"></i><b>12.1</b> Introducción</a><ul>
<li class="chapter" data-level="12.1.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#prerrequisitos-4"><i class="fa fa-check"></i><b>12.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-ordenados-1"><i class="fa fa-check"></i><b>12.2</b> Datos ordenados</a><ul>
<li class="chapter" data-level="12.2.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-23"><i class="fa fa-check"></i><b>12.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#pivotar"><i class="fa fa-check"></i><b>12.3</b> Pivotar</a><ul>
<li class="chapter" data-level="12.3.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-largos"><i class="fa fa-check"></i><b>12.3.1</b> Datos “largos”</a></li>
<li class="chapter" data-level="12.3.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-anchos"><i class="fa fa-check"></i><b>12.3.2</b> Datos “anchos”</a></li>
<li class="chapter" data-level="12.3.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-24"><i class="fa fa-check"></i><b>12.3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="datos-ordenados.html"><a href="datos-ordenados.html#separar-y-unir"><i class="fa fa-check"></i><b>12.4</b> Separar y unir</a><ul>
<li class="chapter" data-level="12.4.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#separar"><i class="fa fa-check"></i><b>12.4.1</b> Separar</a></li>
<li class="chapter" data-level="12.4.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#unir"><i class="fa fa-check"></i><b>12.4.2</b> Unir</a></li>
<li class="chapter" data-level="12.4.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-25"><i class="fa fa-check"></i><b>12.4.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="datos-ordenados.html"><a href="datos-ordenados.html#valores-faltantes-3"><i class="fa fa-check"></i><b>12.5</b> Valores faltantes</a><ul>
<li class="chapter" data-level="12.5.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-26"><i class="fa fa-check"></i><b>12.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="datos-ordenados.html"><a href="datos-ordenados.html#estudio-de-caso"><i class="fa fa-check"></i><b>12.6</b> Estudio de caso</a><ul>
<li class="chapter" data-level="12.6.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-27"><i class="fa fa-check"></i><b>12.6.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-no-ordenados"><i class="fa fa-check"></i><b>12.7</b> Datos no ordenados</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datos-relacionales.html"><a href="datos-relacionales.html"><i class="fa fa-check"></i><b>13</b> Datos relacionales</a><ul>
<li class="chapter" data-level="13.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#introducción-7"><i class="fa fa-check"></i><b>13.1</b> Introducción</a><ul>
<li class="chapter" data-level="13.1.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#prerrequisitos-5"><i class="fa fa-check"></i><b>13.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="datos-relacionales.html"><a href="datos-relacionales.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> Datos sobre vuelos</a><ul>
<li class="chapter" data-level="13.2.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-28"><i class="fa fa-check"></i><b>13.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="datos-relacionales.html"><a href="datos-relacionales.html#claves"><i class="fa fa-check"></i><b>13.3</b> Claves</a><ul>
<li class="chapter" data-level="13.3.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-29"><i class="fa fa-check"></i><b>13.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="datos-relacionales.html"><a href="datos-relacionales.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> Uniones de transformación</a><ul>
<li class="chapter" data-level="13.4.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#entendiendo-las-uniones"><i class="fa fa-check"></i><b>13.4.1</b> Entendiendo las uniones</a></li>
<li class="chapter" data-level="13.4.2" data-path="datos-relacionales.html"><a href="datos-relacionales.html#inner-join"><i class="fa fa-check"></i><b>13.4.2</b> Unión interior</a></li>
<li class="chapter" data-level="13.4.3" data-path="datos-relacionales.html"><a href="datos-relacionales.html#outer-join"><i class="fa fa-check"></i><b>13.4.3</b> Uniones exteriores</a></li>
<li class="chapter" data-level="13.4.4" data-path="datos-relacionales.html"><a href="datos-relacionales.html#join-matches"><i class="fa fa-check"></i><b>13.4.4</b> Claves duplicadas</a></li>
<li class="chapter" data-level="13.4.5" data-path="datos-relacionales.html"><a href="datos-relacionales.html#join-by"><i class="fa fa-check"></i><b>13.4.5</b> Definiendo las columnas clave</a></li>
<li class="chapter" data-level="13.4.6" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-30"><i class="fa fa-check"></i><b>13.4.6</b> Ejercicios</a></li>
<li class="chapter" data-level="13.4.7" data-path="datos-relacionales.html"><a href="datos-relacionales.html#otras-implementaciones"><i class="fa fa-check"></i><b>13.4.7</b> Otras implementaciones</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="datos-relacionales.html"><a href="datos-relacionales.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> Uniones de filtro</a><ul>
<li class="chapter" data-level="13.5.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-31"><i class="fa fa-check"></i><b>13.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="datos-relacionales.html"><a href="datos-relacionales.html#problemas-con-las-uniones"><i class="fa fa-check"></i><b>13.6</b> Problemas con las uniones</a></li>
<li class="chapter" data-level="13.7" data-path="datos-relacionales.html"><a href="datos-relacionales.html#set-operations"><i class="fa fa-check"></i><b>13.7</b> Operaciones de conjuntos</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html"><i class="fa fa-check"></i><b>14</b> Cadenas de caracteres</a><ul>
<li class="chapter" data-level="14.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#introducción-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a><ul>
<li class="chapter" data-level="14.1.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#prerequisitos-1"><i class="fa fa-check"></i><b>14.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#cadenas-elementos-básicos"><i class="fa fa-check"></i><b>14.2</b> Cadenas: elementos básicos</a><ul>
<li class="chapter" data-level="14.2.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#largo-de-cadena"><i class="fa fa-check"></i><b>14.2.1</b> Largo de cadena</a></li>
<li class="chapter" data-level="14.2.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#combinar-cadenas"><i class="fa fa-check"></i><b>14.2.2</b> Combinar cadenas</a></li>
<li class="chapter" data-level="14.2.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#dividir-cadenas"><i class="fa fa-check"></i><b>14.2.3</b> Dividir cadenas</a></li>
<li class="chapter" data-level="14.2.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#locales"><i class="fa fa-check"></i><b>14.2.4</b> <em>Locales</em></a></li>
<li class="chapter" data-level="14.2.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-32"><i class="fa fa-check"></i><b>14.2.5</b> Ejercicios</a></li>
<li class="chapter" data-level="14.2.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#buscar-coincidencia-de-patrones-con-expresiones-regulares"><i class="fa fa-check"></i><b>14.2.6</b> Buscar coincidencia de patrones con expresiones regulares</a></li>
<li class="chapter" data-level="14.2.7" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencias-básicas"><i class="fa fa-check"></i><b>14.2.7</b> Coincidencias básicas</a></li>
<li class="chapter" data-level="14.2.8" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#anclas"><i class="fa fa-check"></i><b>14.2.8</b> Anclas</a></li>
<li class="chapter" data-level="14.2.9" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#clases-de-caracteres-y-alternativas"><i class="fa fa-check"></i><b>14.2.9</b> Clases de caracteres y alternativas</a></li>
<li class="chapter" data-level="14.2.10" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#repetición"><i class="fa fa-check"></i><b>14.2.10</b> Repetición</a></li>
<li class="chapter" data-level="14.2.11" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#agrupamiento-y-referencias-previas"><i class="fa fa-check"></i><b>14.2.11</b> Agrupamiento y referencias previas</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#herramientas"><i class="fa fa-check"></i><b>14.3</b> Herramientas</a><ul>
<li class="chapter" data-level="14.3.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#detectar-coincidencias"><i class="fa fa-check"></i><b>14.3.1</b> Detectar coincidencias</a></li>
<li class="chapter" data-level="14.3.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-38"><i class="fa fa-check"></i><b>14.3.2</b> Ejercicios</a></li>
<li class="chapter" data-level="14.3.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#extraer-coincidencias"><i class="fa fa-check"></i><b>14.3.3</b> Extraer coincidencias</a></li>
<li class="chapter" data-level="14.3.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencias-agrupadas"><i class="fa fa-check"></i><b>14.3.4</b> Coincidencias agrupadas</a></li>
<li class="chapter" data-level="14.3.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#remplazar-coincidencias"><i class="fa fa-check"></i><b>14.3.5</b> Remplazar coincidencias</a></li>
<li class="chapter" data-level="14.3.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#divisiones"><i class="fa fa-check"></i><b>14.3.6</b> Divisiones</a></li>
<li class="chapter" data-level="14.3.7" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#buscar-coincidencias"><i class="fa fa-check"></i><b>14.3.7</b> Buscar coincidencias</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#otro-tipo-de-patrones"><i class="fa fa-check"></i><b>14.4</b> Otro tipo de patrones</a><ul>
<li class="chapter" data-level="14.4.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-43"><i class="fa fa-check"></i><b>14.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#otros-usos-de-las-expresiones-regulares."><i class="fa fa-check"></i><b>14.5</b> Otros usos de las expresiones regulares.</a></li>
<li class="chapter" data-level="14.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#stringi"><i class="fa fa-check"></i><b>14.6</b> stringi</a><ul>
<li class="chapter" data-level="14.6.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-44"><i class="fa fa-check"></i><b>14.6.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factores.html"><a href="factores.html"><i class="fa fa-check"></i><b>15</b> Factores</a><ul>
<li class="chapter" data-level="15.1" data-path="factores.html"><a href="factores.html#introducción-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a><ul>
<li class="chapter" data-level="15.1.1" data-path="factores.html"><a href="factores.html#prerrequisitos-6"><i class="fa fa-check"></i><b>15.1.1</b> Prerrequisitos</a></li>
<li class="chapter" data-level="15.1.2" data-path="factores.html"><a href="factores.html#aprendiendo-más-1"><i class="fa fa-check"></i><b>15.1.2</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="factores.html"><a href="factores.html#creando-factores"><i class="fa fa-check"></i><b>15.2</b> Creando factores</a></li>
<li class="chapter" data-level="15.3" data-path="factores.html"><a href="factores.html#encuesta-social-general"><i class="fa fa-check"></i><b>15.3</b> Encuesta Social General</a><ul>
<li class="chapter" data-level="15.3.1" data-path="factores.html"><a href="factores.html#ejercicios-45"><i class="fa fa-check"></i><b>15.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="factores.html"><a href="factores.html#modificar-el-orden-de-los-factores"><i class="fa fa-check"></i><b>15.4</b> Modificar el orden de los factores</a><ul>
<li class="chapter" data-level="15.4.1" data-path="factores.html"><a href="factores.html#ejercicios-46"><i class="fa fa-check"></i><b>15.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="factores.html"><a href="factores.html#modificar-los-niveles-de-los-factores"><i class="fa fa-check"></i><b>15.5</b> Modificar los niveles de los factores</a><ul>
<li class="chapter" data-level="15.5.1" data-path="factores.html"><a href="factores.html#ejercicios-47"><i class="fa fa-check"></i><b>15.5.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html"><i class="fa fa-check"></i><b>16</b> Fechas y horas</a><ul>
<li class="chapter" data-level="16.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#introducción-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a><ul>
<li class="chapter" data-level="16.1.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#requisitos-previos"><i class="fa fa-check"></i><b>16.1.1</b> Requisitos previos</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#creando-fechashoras"><i class="fa fa-check"></i><b>16.2</b> Creando fechas/horas</a><ul>
<li class="chapter" data-level="16.2.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-cadenas-de-caracteres"><i class="fa fa-check"></i><b>16.2.1</b> Desde cadenas de caracteres</a></li>
<li class="chapter" data-level="16.2.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-componentes-individuales"><i class="fa fa-check"></i><b>16.2.2</b> Desde componentes individuales</a></li>
<li class="chapter" data-level="16.2.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-otros-tipos"><i class="fa fa-check"></i><b>16.2.3</b> Desde otros tipos</a></li>
<li class="chapter" data-level="16.2.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-48"><i class="fa fa-check"></i><b>16.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#componentes-de-fecha-hora"><i class="fa fa-check"></i><b>16.3</b> Componentes de fecha-hora</a><ul>
<li class="chapter" data-level="16.3.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#obteniendo-los-componentes"><i class="fa fa-check"></i><b>16.3.1</b> Obteniendo los componentes</a></li>
<li class="chapter" data-level="16.3.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#redondeo"><i class="fa fa-check"></i><b>16.3.2</b> Redondeo</a></li>
<li class="chapter" data-level="16.3.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#configurando-componentes"><i class="fa fa-check"></i><b>16.3.3</b> Configurando componentes</a></li>
<li class="chapter" data-level="16.3.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-49"><i class="fa fa-check"></i><b>16.3.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#lapsos-de-tiempo"><i class="fa fa-check"></i><b>16.4</b> Lapsos de tiempo</a><ul>
<li class="chapter" data-level="16.4.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#duraciones"><i class="fa fa-check"></i><b>16.4.1</b> Duraciones</a></li>
<li class="chapter" data-level="16.4.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#períodos"><i class="fa fa-check"></i><b>16.4.2</b> Períodos</a></li>
<li class="chapter" data-level="16.4.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#intervalos"><i class="fa fa-check"></i><b>16.4.3</b> Intervalos</a></li>
<li class="chapter" data-level="16.4.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#resumen-1"><i class="fa fa-check"></i><b>16.4.4</b> Resumen</a></li>
<li class="chapter" data-level="16.4.5" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-50"><i class="fa fa-check"></i><b>16.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#husos-horarios"><i class="fa fa-check"></i><b>16.5</b> Husos horarios</a></li>
</ul></li>
<li class="part"><span><b>III Programar</b></span></li>
<li class="chapter" data-level="17" data-path="programar-intro.html"><a href="programar-intro.html"><i class="fa fa-check"></i><b>17</b> Introducción</a><ul>
<li class="chapter" data-level="17.1" data-path="programar-intro.html"><a href="programar-intro.html#aprendiendo-más-2"><i class="fa fa-check"></i><b>17.1</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a><ul>
<li class="chapter" data-level="18.1" data-path="pipes.html"><a href="pipes.html#introducción-11"><i class="fa fa-check"></i><b>18.1</b> Introducción</a><ul>
<li class="chapter" data-level="18.1.1" data-path="pipes.html"><a href="pipes.html#prerequisitos-2"><i class="fa fa-check"></i><b>18.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="pipes.html"><a href="pipes.html#alternativas-a-los-pipes"><i class="fa fa-check"></i><b>18.2</b> Alternativas a los pipes</a><ul>
<li class="chapter" data-level="18.2.1" data-path="pipes.html"><a href="pipes.html#pasos-intermedios"><i class="fa fa-check"></i><b>18.2.1</b> Pasos intermedios</a></li>
<li class="chapter" data-level="18.2.2" data-path="pipes.html"><a href="pipes.html#sobrescribir-el-original"><i class="fa fa-check"></i><b>18.2.2</b> Sobrescribir el original</a></li>
<li class="chapter" data-level="18.2.3" data-path="pipes.html"><a href="pipes.html#composición-de-funciones"><i class="fa fa-check"></i><b>18.2.3</b> Composición de funciones</a></li>
<li class="chapter" data-level="18.2.4" data-path="pipes.html"><a href="pipes.html#uso-de-pipe"><i class="fa fa-check"></i><b>18.2.4</b> Uso de pipe</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="pipes.html"><a href="pipes.html#cuándo-no-usar-el-pipe"><i class="fa fa-check"></i><b>18.3</b> Cuándo no usar el pipe</a></li>
<li class="chapter" data-level="18.4" data-path="pipes.html"><a href="pipes.html#otras-herramientas-de-magrittr"><i class="fa fa-check"></i><b>18.4</b> Otras herramientas de magrittr</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>19</b> Funciones</a><ul>
<li class="chapter" data-level="19.1" data-path="funciones.html"><a href="funciones.html#introducción-12"><i class="fa fa-check"></i><b>19.1</b> Introducción</a><ul>
<li class="chapter" data-level="19.1.1" data-path="funciones.html"><a href="funciones.html#prerrequisitos-7"><i class="fa fa-check"></i><b>19.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="funciones.html"><a href="funciones.html#cuándo-deberías-escribir-una-función"><i class="fa fa-check"></i><b>19.2</b> ¿Cuándo deberías escribir una función?</a><ul>
<li class="chapter" data-level="19.2.1" data-path="funciones.html"><a href="funciones.html#ejercicios-51"><i class="fa fa-check"></i><b>19.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="funciones.html"><a href="funciones.html#las-funciones-son-para-los-seres-humanos-y-para-las-computadoras"><i class="fa fa-check"></i><b>19.3</b> Las funciones son para los seres humanos y para las computadoras</a><ul>
<li class="chapter" data-level="19.3.1" data-path="funciones.html"><a href="funciones.html#ejercicios-52"><i class="fa fa-check"></i><b>19.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="funciones.html"><a href="funciones.html#ejecución-condicional"><i class="fa fa-check"></i><b>19.4</b> Ejecución condicional</a><ul>
<li class="chapter" data-level="19.4.1" data-path="funciones.html"><a href="funciones.html#condiciones"><i class="fa fa-check"></i><b>19.4.1</b> Condiciones</a></li>
<li class="chapter" data-level="19.4.2" data-path="funciones.html"><a href="funciones.html#condiciones-múltiples"><i class="fa fa-check"></i><b>19.4.2</b> Condiciones múltiples</a></li>
<li class="chapter" data-level="19.4.3" data-path="funciones.html"><a href="funciones.html#estilo-del-código"><i class="fa fa-check"></i><b>19.4.3</b> Estilo del código</a></li>
<li class="chapter" data-level="19.4.4" data-path="funciones.html"><a href="funciones.html#ejercicios-53"><i class="fa fa-check"></i><b>19.4.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="funciones.html"><a href="funciones.html#argumentos-de-funciones"><i class="fa fa-check"></i><b>19.5</b> Argumentos de funciones</a><ul>
<li class="chapter" data-level="19.5.1" data-path="funciones.html"><a href="funciones.html#elección-de-nombres"><i class="fa fa-check"></i><b>19.5.1</b> Elección de nombres</a></li>
<li class="chapter" data-level="19.5.2" data-path="funciones.html"><a href="funciones.html#chequear-valores"><i class="fa fa-check"></i><b>19.5.2</b> Chequear valores</a></li>
<li class="chapter" data-level="19.5.3" data-path="funciones.html"><a href="funciones.html#punto-punto-punto"><i class="fa fa-check"></i><b>19.5.3</b> Punto-punto-punto (…)</a></li>
<li class="chapter" data-level="19.5.4" data-path="funciones.html"><a href="funciones.html#evaluación-diferida"><i class="fa fa-check"></i><b>19.5.4</b> Evaluación diferida</a></li>
<li class="chapter" data-level="19.5.5" data-path="funciones.html"><a href="funciones.html#ejercicios-54"><i class="fa fa-check"></i><b>19.5.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="funciones.html"><a href="funciones.html#valores-de-retorno"><i class="fa fa-check"></i><b>19.6</b> Valores de retorno</a><ul>
<li class="chapter" data-level="19.6.1" data-path="funciones.html"><a href="funciones.html#sentencias-de-retorno-explícitas"><i class="fa fa-check"></i><b>19.6.1</b> Sentencias de retorno explícitas</a></li>
<li class="chapter" data-level="19.6.2" data-path="funciones.html"><a href="funciones.html#escribir-funciones-aptas-para-un-pipe"><i class="fa fa-check"></i><b>19.6.2</b> Escribir funciones aptas para un pipe</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="funciones.html"><a href="funciones.html#entorno"><i class="fa fa-check"></i><b>19.7</b> Entorno</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>20</b> Vectores</a><ul>
<li class="chapter" data-level="20.1" data-path="vectores.html"><a href="vectores.html#introducción-13"><i class="fa fa-check"></i><b>20.1</b> Introducción</a><ul>
<li class="chapter" data-level="20.1.1" data-path="vectores.html"><a href="vectores.html#prerrequisitos-8"><i class="fa fa-check"></i><b>20.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="vectores.html"><a href="vectores.html#vectores-básicos"><i class="fa fa-check"></i><b>20.2</b> Vectores básicos</a></li>
<li class="chapter" data-level="20.3" data-path="vectores.html"><a href="vectores.html#tipos-importantes-de-vectores-atómicos"><i class="fa fa-check"></i><b>20.3</b> Tipos importantes de vectores atómicos</a><ul>
<li class="chapter" data-level="20.3.1" data-path="vectores.html"><a href="vectores.html#lógico"><i class="fa fa-check"></i><b>20.3.1</b> Lógico</a></li>
<li class="chapter" data-level="20.3.2" data-path="vectores.html"><a href="vectores.html#numérico"><i class="fa fa-check"></i><b>20.3.2</b> Numérico</a></li>
<li class="chapter" data-level="20.3.3" data-path="vectores.html"><a href="vectores.html#caracter"><i class="fa fa-check"></i><b>20.3.3</b> Caracter</a></li>
<li class="chapter" data-level="20.3.4" data-path="vectores.html"><a href="vectores.html#valores-faltantes-4"><i class="fa fa-check"></i><b>20.3.4</b> Valores faltantes</a></li>
<li class="chapter" data-level="20.3.5" data-path="vectores.html"><a href="vectores.html#ejercicios-55"><i class="fa fa-check"></i><b>20.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="vectores.html"><a href="vectores.html#usando-vectores-atómicos"><i class="fa fa-check"></i><b>20.4</b> Usando vectores atómicos</a><ul>
<li class="chapter" data-level="20.4.1" data-path="vectores.html"><a href="vectores.html#coerción"><i class="fa fa-check"></i><b>20.4.1</b> Coerción</a></li>
<li class="chapter" data-level="20.4.2" data-path="vectores.html"><a href="vectores.html#funciones-de-prueba"><i class="fa fa-check"></i><b>20.4.2</b> Funciones de prueba</a></li>
<li class="chapter" data-level="20.4.3" data-path="vectores.html"><a href="vectores.html#escalares-y-reglas-de-reciclado"><i class="fa fa-check"></i><b>20.4.3</b> Escalares y reglas de reciclado</a></li>
<li class="chapter" data-level="20.4.4" data-path="vectores.html"><a href="vectores.html#nombrar-vectores"><i class="fa fa-check"></i><b>20.4.4</b> Nombrar vectores</a></li>
<li class="chapter" data-level="20.4.5" data-path="vectores.html"><a href="vectores.html#vector-subsetting"><i class="fa fa-check"></i><b>20.4.5</b> Creación de subconjuntos (<em>subsetting</em>)</a></li>
<li class="chapter" data-level="20.4.6" data-path="vectores.html"><a href="vectores.html#ejercicios-56"><i class="fa fa-check"></i><b>20.4.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="vectores.html"><a href="vectores.html#vectores-recursivos-listas"><i class="fa fa-check"></i><b>20.5</b> Vectores Recursivos (listas)</a><ul>
<li class="chapter" data-level="20.5.1" data-path="vectores.html"><a href="vectores.html#visualizando-listas"><i class="fa fa-check"></i><b>20.5.1</b> Visualizando listas</a></li>
<li class="chapter" data-level="20.5.2" data-path="vectores.html"><a href="vectores.html#subconjuntos-subsetting"><i class="fa fa-check"></i><b>20.5.2</b> Subconjuntos (<em>Subsetting</em>)</a></li>
<li class="chapter" data-level="20.5.3" data-path="vectores.html"><a href="vectores.html#listas-de-condimentos"><i class="fa fa-check"></i><b>20.5.3</b> Listas de Condimentos</a></li>
<li class="chapter" data-level="20.5.4" data-path="vectores.html"><a href="vectores.html#ejercicios-57"><i class="fa fa-check"></i><b>20.5.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="vectores.html"><a href="vectores.html#atributos"><i class="fa fa-check"></i><b>20.6</b> Atributos</a></li>
<li class="chapter" data-level="20.7" data-path="vectores.html"><a href="vectores.html#vectores-aumentados"><i class="fa fa-check"></i><b>20.7</b> Vectores aumentados</a><ul>
<li class="chapter" data-level="20.7.1" data-path="vectores.html"><a href="vectores.html#factores-1"><i class="fa fa-check"></i><b>20.7.1</b> Factores</a></li>
<li class="chapter" data-level="20.7.2" data-path="vectores.html"><a href="vectores.html#fechas-y-fechas-hora"><i class="fa fa-check"></i><b>20.7.2</b> Fechas y fechas-hora</a></li>
<li class="chapter" data-level="20.7.3" data-path="vectores.html"><a href="vectores.html#tibbles-1"><i class="fa fa-check"></i><b>20.7.3</b> Tibbles</a></li>
<li class="chapter" data-level="20.7.4" data-path="vectores.html"><a href="vectores.html#ejercicios-58"><i class="fa fa-check"></i><b>20.7.4</b> Ejercicios:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteración.html"><a href="iteración.html"><i class="fa fa-check"></i><b>21</b> Iteración</a><ul>
<li class="chapter" data-level="21.1" data-path="iteración.html"><a href="iteración.html#introducción-14"><i class="fa fa-check"></i><b>21.1</b> Introducción</a><ul>
<li class="chapter" data-level="21.1.1" data-path="iteración.html"><a href="iteración.html#prerrequisitos-9"><i class="fa fa-check"></i><b>21.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="iteración.html"><a href="iteración.html#bucles-for"><i class="fa fa-check"></i><b>21.2</b> Bucles <em>for</em></a><ul>
<li class="chapter" data-level="21.2.1" data-path="iteración.html"><a href="iteración.html#ejercicios-59"><i class="fa fa-check"></i><b>21.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="iteración.html"><a href="iteración.html#variaciones-de-bucles-for"><i class="fa fa-check"></i><b>21.3</b> Variaciones de bucles <em>for</em></a><ul>
<li class="chapter" data-level="21.3.1" data-path="iteración.html"><a href="iteración.html#modificar-un-objeto-existente"><i class="fa fa-check"></i><b>21.3.1</b> Modificar un objeto existente</a></li>
<li class="chapter" data-level="21.3.2" data-path="iteración.html"><a href="iteración.html#patrones-de-bucle"><i class="fa fa-check"></i><b>21.3.2</b> Patrones de bucle</a></li>
<li class="chapter" data-level="21.3.3" data-path="iteración.html"><a href="iteración.html#longitud-de-output-desconocida"><i class="fa fa-check"></i><b>21.3.3</b> Longitud de <em>output</em> desconocida</a></li>
<li class="chapter" data-level="21.3.4" data-path="iteración.html"><a href="iteración.html#longitud-de-secuencia-desconocida"><i class="fa fa-check"></i><b>21.3.4</b> Longitud de secuencia desconocida</a></li>
<li class="chapter" data-level="21.3.5" data-path="iteración.html"><a href="iteración.html#ejercicios-60"><i class="fa fa-check"></i><b>21.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="iteración.html"><a href="iteración.html#bucles-for-vs.funcionales"><i class="fa fa-check"></i><b>21.4</b> Bucles <em>for</em> vs. funcionales</a><ul>
<li class="chapter" data-level="21.4.1" data-path="iteración.html"><a href="iteración.html#ejercicios-61"><i class="fa fa-check"></i><b>21.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="iteración.html"><a href="iteración.html#las-funciones-map"><i class="fa fa-check"></i><b>21.5</b> Las funciones <em>map</em></a><ul>
<li class="chapter" data-level="21.5.1" data-path="iteración.html"><a href="iteración.html#atajos"><i class="fa fa-check"></i><b>21.5.1</b> Atajos</a></li>
<li class="chapter" data-level="21.5.2" data-path="iteración.html"><a href="iteración.html#r-base"><i class="fa fa-check"></i><b>21.5.2</b> R Base</a></li>
<li class="chapter" data-level="21.5.3" data-path="iteración.html"><a href="iteración.html#ejercicios-62"><i class="fa fa-check"></i><b>21.5.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="iteración.html"><a href="iteración.html#manejando-los-errores"><i class="fa fa-check"></i><b>21.6</b> Manejando los errores</a></li>
<li class="chapter" data-level="21.7" data-path="iteración.html"><a href="iteración.html#usar-map-sobre-múltiples-argumentos"><i class="fa fa-check"></i><b>21.7</b> Usar <em>map</em> sobre múltiples argumentos</a><ul>
<li class="chapter" data-level="21.7.1" data-path="iteración.html"><a href="iteración.html#invocando-distintas-funciones"><i class="fa fa-check"></i><b>21.7.1</b> Invocando distintas funciones</a></li>
</ul></li>
<li class="chapter" data-level="21.8" data-path="iteración.html"><a href="iteración.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteración.html"><a href="iteración.html#otros-patrones-para-los-bucles-for"><i class="fa fa-check"></i><b>21.9</b> Otros patrones para los bucles <em>for</em></a><ul>
<li class="chapter" data-level="21.9.1" data-path="iteración.html"><a href="iteración.html#funciones-predicativas"><i class="fa fa-check"></i><b>21.9.1</b> Funciones predicativas</a></li>
<li class="chapter" data-level="21.9.2" data-path="iteración.html"><a href="iteración.html#reducir-y-acumular"><i class="fa fa-check"></i><b>21.9.2</b> Reducir y acumular</a></li>
<li class="chapter" data-level="21.9.3" data-path="iteración.html"><a href="iteración.html#ejercicios-63"><i class="fa fa-check"></i><b>21.9.3</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Modelar</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introducción</a><ul>
<li class="chapter" data-level="22.1" data-path="model-intro.html"><a href="model-intro.html#generación-de-hipótesis-vs.confirmación-de-hipótesis"><i class="fa fa-check"></i><b>22.1</b> Generación de hipótesis vs. confirmación de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html"><i class="fa fa-check"></i><b>23</b> Modelos: conceptos básicos</a><ul>
<li class="chapter" data-level="23.1" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#introducción-15"><i class="fa fa-check"></i><b>23.1</b> Introducción</a><ul>
<li class="chapter" data-level="23.1.1" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#prerrequisitos-10"><i class="fa fa-check"></i><b>23.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#un-modelo-simple"><i class="fa fa-check"></i><b>23.2</b> Un modelo simple</a><ul>
<li class="chapter" data-level="23.2.1" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-64"><i class="fa fa-check"></i><b>23.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#visualizando-modelos"><i class="fa fa-check"></i><b>23.3</b> Visualizando modelos</a><ul>
<li class="chapter" data-level="23.3.1" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#predicciones"><i class="fa fa-check"></i><b>23.3.1</b> Predicciones</a></li>
<li class="chapter" data-level="23.3.2" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#residuos"><i class="fa fa-check"></i><b>23.3.2</b> Residuos</a></li>
<li class="chapter" data-level="23.3.3" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-65"><i class="fa fa-check"></i><b>23.3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#fórmulas-y-familias-de-modelos"><i class="fa fa-check"></i><b>23.4</b> Fórmulas y familias de modelos</a><ul>
<li class="chapter" data-level="23.4.1" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#variables-categóricas"><i class="fa fa-check"></i><b>23.4.1</b> Variables categóricas</a></li>
<li class="chapter" data-level="23.4.2" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#interacciones-continuas-y-categóricas"><i class="fa fa-check"></i><b>23.4.2</b> Interacciones (continuas y categóricas)</a></li>
<li class="chapter" data-level="23.4.3" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#interacciones-dos-variables-continuas"><i class="fa fa-check"></i><b>23.4.3</b> Interacciones (dos variables continuas)</a></li>
<li class="chapter" data-level="23.4.4" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#transformaciones"><i class="fa fa-check"></i><b>23.4.4</b> Transformaciones</a></li>
<li class="chapter" data-level="23.4.5" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-66"><i class="fa fa-check"></i><b>23.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#valores-faltantes-5"><i class="fa fa-check"></i><b>23.5</b> Valores faltantes</a></li>
<li class="chapter" data-level="23.6" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#otras-familias-de-modelos"><i class="fa fa-check"></i><b>23.6</b> Otras familias de modelos</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html"><i class="fa fa-check"></i><b>24</b> Construcción de modelos</a><ul>
<li class="chapter" data-level="24.1" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#introducción-16"><i class="fa fa-check"></i><b>24.1</b> Introducción</a><ul>
<li class="chapter" data-level="24.1.1" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#prerrequisitos-11"><i class="fa fa-check"></i><b>24.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#diamond-prices"><i class="fa fa-check"></i><b>24.2</b> ¿Por qué los diamantes de baja calidad son más caros?</a><ul>
<li class="chapter" data-level="24.2.1" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#precio-y-quilates"><i class="fa fa-check"></i><b>24.2.1</b> Precio y quilates</a></li>
<li class="chapter" data-level="24.2.2" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#un-modelo-más-complicado"><i class="fa fa-check"></i><b>24.2.2</b> Un modelo más complicado</a></li>
<li class="chapter" data-level="24.2.3" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#ejercicios-67"><i class="fa fa-check"></i><b>24.2.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#qué-afecta-el-número-de-vuelos-diarios"><i class="fa fa-check"></i><b>24.3</b> ¿Qué afecta el número de vuelos diarios?</a><ul>
<li class="chapter" data-level="24.3.1" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#día-de-la-semana"><i class="fa fa-check"></i><b>24.3.1</b> Día de la semana</a></li>
<li class="chapter" data-level="24.3.2" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#efecto-estacional-del-sábado"><i class="fa fa-check"></i><b>24.3.2</b> Efecto estacional del sábado</a></li>
<li class="chapter" data-level="24.3.3" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#variables-calculadas"><i class="fa fa-check"></i><b>24.3.3</b> Variables calculadas</a></li>
<li class="chapter" data-level="24.3.4" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#época-del-año-un-enfoque-alternativo"><i class="fa fa-check"></i><b>24.3.4</b> Época del año: un enfoque alternativo</a></li>
<li class="chapter" data-level="24.3.5" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#ejercicios-68"><i class="fa fa-check"></i><b>24.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#aprende-más-sobre-los-modelos"><i class="fa fa-check"></i><b>24.4</b> Aprende más sobre los modelos</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="muchos-modelos.html"><a href="muchos-modelos.html"><i class="fa fa-check"></i><b>25</b> Muchos modelos</a><ul>
<li class="chapter" data-level="25.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#introducción-17"><i class="fa fa-check"></i><b>25.1</b> Introducción</a><ul>
<li class="chapter" data-level="25.1.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#prerrequisitos-12"><i class="fa fa-check"></i><b>25.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#gapminder"><i class="fa fa-check"></i><b>25.2</b> gapminder</a><ul>
<li class="chapter" data-level="25.2.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#datos-anidados"><i class="fa fa-check"></i><b>25.2.1</b> Datos anidados</a></li>
<li class="chapter" data-level="25.2.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#columnas-lista"><i class="fa fa-check"></i><b>25.2.2</b> Columnas-lista</a></li>
<li class="chapter" data-level="25.2.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#desanidando"><i class="fa fa-check"></i><b>25.2.3</b> Desanidando</a></li>
<li class="chapter" data-level="25.2.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#calidad-del-modelo"><i class="fa fa-check"></i><b>25.2.4</b> Calidad del modelo</a></li>
<li class="chapter" data-level="25.2.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-69"><i class="fa fa-check"></i><b>25.2.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#columnas-lista-1"><i class="fa fa-check"></i><b>25.3</b> Columnas-lista</a></li>
<li class="chapter" data-level="25.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#creando-columnas-lista"><i class="fa fa-check"></i><b>25.4</b> Creando columnas-lista</a><ul>
<li class="chapter" data-level="25.4.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#con-anidación"><i class="fa fa-check"></i><b>25.4.1</b> Con anidación</a></li>
<li class="chapter" data-level="25.4.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-funciones-vectorizadas"><i class="fa fa-check"></i><b>25.4.2</b> A partir de funciones vectorizadas</a></li>
<li class="chapter" data-level="25.4.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-medidas-de-resumen-con-más-de-un-valor"><i class="fa fa-check"></i><b>25.4.3</b> A partir de medidas de resumen con más de un valor</a></li>
<li class="chapter" data-level="25.4.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-una-lista-nombrada"><i class="fa fa-check"></i><b>25.4.4</b> A partir de una lista nombrada</a></li>
<li class="chapter" data-level="25.4.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-70"><i class="fa fa-check"></i><b>25.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#simplificando-columnas-lista"><i class="fa fa-check"></i><b>25.5</b> Simplificando columnas-lista</a><ul>
<li class="chapter" data-level="25.5.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#lista-a-vector"><i class="fa fa-check"></i><b>25.5.1</b> Lista a vector</a></li>
<li class="chapter" data-level="25.5.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#desanidando-1"><i class="fa fa-check"></i><b>25.5.2</b> Desanidando</a></li>
<li class="chapter" data-level="25.5.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-71"><i class="fa fa-check"></i><b>25.5.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="muchos-modelos.html"><a href="muchos-modelos.html#haciendo-datos-ordenados-con-broom"><i class="fa fa-check"></i><b>25.6</b> Haciendo datos ordenados con broom</a></li>
</ul></li>
<li class="part"><span><b>V Comunicar</b></span></li>
<li class="chapter" data-level="26" data-path="introducción-18.html"><a href="introducción-18.html"><i class="fa fa-check"></i><b>26</b> Introducción</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a><ul>
<li class="chapter" data-level="27.1" data-path="r-markdown.html"><a href="r-markdown.html#introducción-19"><i class="fa fa-check"></i><b>27.1</b> Introducción</a><ul>
<li class="chapter" data-level="27.1.1" data-path="r-markdown.html"><a href="r-markdown.html#prerequisitos-3"><i class="fa fa-check"></i><b>27.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="27.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-básico"><i class="fa fa-check"></i><b>27.2</b> R Markdown básico</a><ul>
<li class="chapter" data-level="27.2.1" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-72"><i class="fa fa-check"></i><b>27.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="r-markdown.html"><a href="r-markdown.html#formateo-de-texto-con-markdown"><i class="fa fa-check"></i><b>27.3</b> Formateo de texto con Markdown</a><ul>
<li class="chapter" data-level="27.3.1" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-73"><i class="fa fa-check"></i><b>27.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="r-markdown.html"><a href="r-markdown.html#bloques-de-código"><i class="fa fa-check"></i><b>27.4</b> Bloques de código</a><ul>
<li class="chapter" data-level="27.4.1" data-path="r-markdown.html"><a href="r-markdown.html#nombres-en-bloques"><i class="fa fa-check"></i><b>27.4.1</b> Nombres en bloques</a></li>
<li class="chapter" data-level="27.4.2" data-path="r-markdown.html"><a href="r-markdown.html#opciones-en-bloques"><i class="fa fa-check"></i><b>27.4.2</b> Opciones en bloques</a></li>
<li class="chapter" data-level="27.4.3" data-path="r-markdown.html"><a href="r-markdown.html#tablas"><i class="fa fa-check"></i><b>27.4.3</b> Tablas</a></li>
<li class="chapter" data-level="27.4.4" data-path="r-markdown.html"><a href="r-markdown.html#caching"><i class="fa fa-check"></i><b>27.4.4</b> Caching</a></li>
<li class="chapter" data-level="27.4.5" data-path="r-markdown.html"><a href="r-markdown.html#opciones-globales"><i class="fa fa-check"></i><b>27.4.5</b> Opciones globales</a></li>
<li class="chapter" data-level="27.4.6" data-path="r-markdown.html"><a href="r-markdown.html#código-en-la-línea"><i class="fa fa-check"></i><b>27.4.6</b> Código en la línea</a></li>
<li class="chapter" data-level="27.4.7" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-74"><i class="fa fa-check"></i><b>27.4.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="r-markdown.html"><a href="r-markdown.html#solucionando-problemas"><i class="fa fa-check"></i><b>27.5</b> Solucionando problemas</a></li>
<li class="chapter" data-level="27.6" data-path="r-markdown.html"><a href="r-markdown.html#encabezado-yaml"><i class="fa fa-check"></i><b>27.6</b> Encabezado YAML</a><ul>
<li class="chapter" data-level="27.6.1" data-path="r-markdown.html"><a href="r-markdown.html#parámetros"><i class="fa fa-check"></i><b>27.6.1</b> Parámetros</a></li>
<li class="chapter" data-level="27.6.2" data-path="r-markdown.html"><a href="r-markdown.html#bibliografías-y-citas"><i class="fa fa-check"></i><b>27.6.2</b> Bibliografías y citas</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="r-markdown.html"><a href="r-markdown.html#aprendiendo-más-3"><i class="fa fa-check"></i><b>27.7</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html"><i class="fa fa-check"></i><b>28</b> Comunicar con gráficos</a><ul>
<li class="chapter" data-level="28.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#introducción-20"><i class="fa fa-check"></i><b>28.1</b> Introducción</a><ul>
<li class="chapter" data-level="28.1.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#prerrequisitos-13"><i class="fa fa-check"></i><b>28.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#etiquetas"><i class="fa fa-check"></i><b>28.2</b> Etiquetas</a><ul>
<li class="chapter" data-level="28.2.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-75"><i class="fa fa-check"></i><b>28.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#anotaciones"><i class="fa fa-check"></i><b>28.3</b> Anotaciones</a><ul>
<li class="chapter" data-level="28.3.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-76"><i class="fa fa-check"></i><b>28.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#escalas"><i class="fa fa-check"></i><b>28.4</b> Escalas</a><ul>
<li class="chapter" data-level="28.4.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#marcas-de-los-ejes-y-leyendas"><i class="fa fa-check"></i><b>28.4.1</b> Marcas de los ejes y leyendas</a></li>
<li class="chapter" data-level="28.4.2" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#diseño-de-leyendas"><i class="fa fa-check"></i><b>28.4.2</b> Diseño de leyendas</a></li>
<li class="chapter" data-level="28.4.3" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#reemplazando-una-escala"><i class="fa fa-check"></i><b>28.4.3</b> Reemplazando una escala</a></li>
<li class="chapter" data-level="28.4.4" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-77"><i class="fa fa-check"></i><b>28.4.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#haciendo-zoom"><i class="fa fa-check"></i><b>28.5</b> Haciendo Zoom</a></li>
<li class="chapter" data-level="28.6" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#temas"><i class="fa fa-check"></i><b>28.6</b> Temas</a></li>
<li class="chapter" data-level="28.7" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#guardando-tus-gráficos"><i class="fa fa-check"></i><b>28.7</b> Guardando tus gráficos</a><ul>
<li class="chapter" data-level="28.7.1" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#redimensionar-una-figura"><i class="fa fa-check"></i><b>28.7.1</b> Redimensionar una figura</a></li>
<li class="chapter" data-level="28.7.2" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#otras-opciones-importantes"><i class="fa fa-check"></i><b>28.7.2</b> Otras opciones importantes</a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#aprendiendo-más-4"><i class="fa fa-check"></i><b>28.8</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html"><i class="fa fa-check"></i><b>29</b> Formatos de R Markdown</a><ul>
<li class="chapter" data-level="29.1" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#introducción-21"><i class="fa fa-check"></i><b>29.1</b> Introducción</a></li>
<li class="chapter" data-level="29.2" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#opciones-de-salida"><i class="fa fa-check"></i><b>29.2</b> Opciones de salida</a></li>
<li class="chapter" data-level="29.3" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#documentos"><i class="fa fa-check"></i><b>29.3</b> Documentos</a></li>
<li class="chapter" data-level="29.4" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#notebooks"><i class="fa fa-check"></i><b>29.4</b> Notebooks</a></li>
<li class="chapter" data-level="29.5" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#presentaciones"><i class="fa fa-check"></i><b>29.5</b> Presentaciones</a></li>
<li class="chapter" data-level="29.6" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#dashboards"><i class="fa fa-check"></i><b>29.6</b> Dashboards</a></li>
<li class="chapter" data-level="29.7" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#interactividad"><i class="fa fa-check"></i><b>29.7</b> Interactividad</a><ul>
<li class="chapter" data-level="29.7.1" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#htmlwidgets"><i class="fa fa-check"></i><b>29.7.1</b> htmlwidgets</a></li>
<li class="chapter" data-level="29.7.2" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#shiny"><i class="fa fa-check"></i><b>29.7.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#sitios-web"><i class="fa fa-check"></i><b>29.8</b> Sitios Web</a></li>
<li class="chapter" data-level="29.9" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#otros-formatos"><i class="fa fa-check"></i><b>29.9</b> Otros Formatos</a></li>
<li class="chapter" data-level="29.10" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#aprende-más"><i class="fa fa-check"></i><b>29.10</b> Aprende más</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="flujo-de-trabajo-en-r-markdown.html"><a href="flujo-de-trabajo-en-r-markdown.html"><i class="fa fa-check"></i><b>30</b> Flujo de trabajo en R Markdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Ciencia de Datos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transform" class="section level1">
<h1><span class="header-section-number">5</span> Transformación de datos</h1>
<div id="introducción-2" class="section level2">
<h2><span class="header-section-number">5.1</span> Introducción</h2>
<p>La visualización es una herramienta importante para para la generación de conocimiento; sin embargo, es raro que obtengas los datos exactamente en la forma correcta que los necesitas. A menudo tendrás que crear algunas variables nuevas o resúmenes, o tal vez solo quieras cambiar el nombre de las variables o reordenar las observaciones para facilitar el trabajo con los datos. En este capítulo aprenderás cómo hacer todo eso (¡y más!), incluyendo cómo transformar tus datos utilizando el paquete <strong>dplyr</strong> y el uso de un nuevo conjunto de datos sobre salida de vuelos de la ciudad de Nueva York en el año 2013.</p>
<div id="prerequisitos" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Prerequisitos</h3>
<p>En este capítulo nos enfocaremos en cómo usar el paquete <strong>dplyr</strong>, otro miembro central del tidyverse. Ilustraremos las ideas clave con el <em>dataset</em> <em>vuelos</em> que está contenido en el paquete <strong>datos</strong>. Utilizaremos <strong>ggplot2</strong> para ayudarnos a comprender los datos.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="co">#remotes::install_github(&quot;cienciadedatos/datos&quot;)</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="kw">library</span>(datos)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Toma nota acerca del mensaje de conflictos que se imprime cuando cargas el paquete <strong>tidyverse</strong>. Te indica que <strong>dplyr</strong> sobrescribe algunas funciones de R base. Si deseas usar la versión base de estas funciones después de cargar <strong>dplyr</strong>, necesitarás usar sus nombres completos: <code>stats::filter()</code> y <code>stats::lag()</code>.</p>
</div>
<div id="vuelos" class="section level3">
<h3><span class="header-section-number">5.1.2</span> vuelos</h3>
<p>Para explorar los verbos básicos de manipulación de datos de <strong>dplyr</strong>, usaremos <code>vuelos</code>. Este conjunto de datos contiene los 336, 776 vuelos que partieron de la ciudad de Nueva York durante el 2013. Los datos provienen del <a href="https://www.transtats.bts.gov/DatabaseInfo.asp?DB_ID=120&amp;Link=0">Departamento de Estadísticas de Transporte de los Estados Unidos</a>, y están documentados en <code>?vuelos</code>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">vuelos</a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="co">#&gt; # A tibble: 336,776 x 19</span></a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb68-5" data-line-number="5"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb68-6" data-line-number="6"><span class="co">#&gt; 2  2013     1     1            533              529             4</span></a>
<a class="sourceLine" id="cb68-7" data-line-number="7"><span class="co">#&gt; 3  2013     1     1            542              540             2</span></a>
<a class="sourceLine" id="cb68-8" data-line-number="8"><span class="co">#&gt; 4  2013     1     1            544              545            -1</span></a>
<a class="sourceLine" id="cb68-9" data-line-number="9"><span class="co">#&gt; 5  2013     1     1            554              600            -6</span></a>
<a class="sourceLine" id="cb68-10" data-line-number="10"><span class="co">#&gt; 6  2013     1     1            554              558            -4</span></a>
<a class="sourceLine" id="cb68-11" data-line-number="11"><span class="co">#&gt; # … with 336,770 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb68-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb68-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb68-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb68-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Es posible que observes que este conjunto de datos se imprime de una forma un poco diferente a otros que podrías haber utilizado en el pasado: solo muestra las primeras filas y todas las columnas que caben en tu pantalla. Para ver todo el conjunto de datos, puedes ejecutar <code>View(vuelos)</code> que abrirá el conjunto de datos en el visor de RStudio. En este caso se imprime de manera diferente porque es un <strong>tibble</strong>. Los <em>tibbles</em> son <em>data frames</em>, pero ligeramente ajustados para que funcionen mejor en el tidyverse. Por ahora, no necesitas preocuparte por las diferencias; hablaremos en más detalle de los <em>tibbles</em> en <a href="#wrangle-intro">Manejar o domar datos</a>.</p>
<p>También podrás haber notado la fila de tres (o cuatro) abreviaturas de letras debajo de los nombres de las columnas. Estos describen el tipo de cada variable:</p>
<ul>
<li><p><code>int</code> significa enteros.</p></li>
<li><p><code>dbl</code> significa dobles, o números reales.</p></li>
<li><p><code>chr</code> significa vectores de caracteres o cadenas.</p></li>
<li><p><code>dttm</code> significa fechas y horas (una fecha + una hora).</p></li>
</ul>
<p>Hay otros tres tipos comunes de variables que no se usan en este conjunto de datos, pero que encontrarás más adelante en el libro:</p>
<ul>
<li><p><code>lgl</code> significa lógico, vectores que solo contienen <code>TRUE</code> (verdadero) o <code>FALSE</code> (falso).</p></li>
<li><p><code>fctr</code> significa factores, que R usa para representar variables categóricas con valores posibles fijos.</p></li>
<li><p><code>date</code> significa fechas.</p></li>
</ul>
</div>
<div id="lo-básico-de-dplyr" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Lo básico de <strong>dplyr</strong></h3>
<p>En este capítulo, aprenderás las cinco funciones clave de <strong>dplyr</strong> que te permiten resolver la gran mayoría de tus desafíos de manipulación de datos:</p>
<ul>
<li>Filtrar o elegir las observaciones por sus valores (<code>filter()</code> — del inglés filtrar).</li>
<li>Reordenar las filas (<code>arrange()</code> — del inglés organizar).</li>
<li>Seleccionar las variables por sus nombres (<code>select()</code> — del inglés seleccionar).</li>
<li>Crear nuevas variables con transformaciones de variables existentes (<code>mutate()</code> — del inglés mutar o transformar).</li>
<li>Contraer muchos valores en un solo resumen (<code>summarise()</code> — del inglés resumir).</li>
</ul>
<p>Todas estas funciones se pueden usar junto con <code>group_by()</code> (del inglés <em>agrupar por</em>), que cambia el alcance de cada función para que actúe ya no sobre todo el conjunto de datos sino de grupo en grupo. Estas seis funciones proporcionan los verbos para este lenguaje de manipulación de datos.</p>
<p>Todos los verbos funcionan de manera similar:</p>
<ol style="list-style-type: decimal">
<li><p>El primer argumento es un <em>data frame</em>.</p></li>
<li><p>Los argumentos posteriores describen qué hacer con el <em>data frame</em> usando los nombres de las variables (sin comillas).</p></li>
<li><p>El resultado es un nuevo <em>data frame</em>.</p></li>
</ol>
<p>En conjunto, estas propiedades hacen que sea fácil encadenar varios pasos simples para lograr un resultado complejo. Sumerjámosnos y veamos cómo funcionan estos verbos.</p>
</div>
</div>
<div id="filtrar-filas-con-filter" class="section level2">
<h2><span class="header-section-number">5.2</span> Filtrar filas con <code>filter()</code></h2>
<p><code>filter()</code> te permite filtrar un subconjunto de observaciones según sus valores. El primer argumento es el nombre del <em>data frame</em>. El segundo y los siguientes argumentos son las expresiones que lo filtran. Por ejemplo, podemos seleccionar todos los vuelos del 1 de enero con:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">filter</span>(vuelos, mes <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, dia <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="co">#&gt; # A tibble: 842 x 19</span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb69-5" data-line-number="5"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb69-6" data-line-number="6"><span class="co">#&gt; 2  2013     1     1            533              529             4</span></a>
<a class="sourceLine" id="cb69-7" data-line-number="7"><span class="co">#&gt; 3  2013     1     1            542              540             2</span></a>
<a class="sourceLine" id="cb69-8" data-line-number="8"><span class="co">#&gt; 4  2013     1     1            544              545            -1</span></a>
<a class="sourceLine" id="cb69-9" data-line-number="9"><span class="co">#&gt; 5  2013     1     1            554              600            -6</span></a>
<a class="sourceLine" id="cb69-10" data-line-number="10"><span class="co">#&gt; 6  2013     1     1            554              558            -4</span></a>
<a class="sourceLine" id="cb69-11" data-line-number="11"><span class="co">#&gt; # … with 836 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb69-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb69-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb69-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb69-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Cuando ejecutas esa línea de código, <strong>dplyr</strong> ejecuta la operación de filtrado y devuelve un nuevo <em>data frame</em>. Las funciones de <strong>dplyr</strong> nunca modifican su <em>input</em>, por lo que si deseas guardar el resultado, necesitarás usar el operador de asignación, <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">ene1 &lt;-<span class="st"> </span><span class="kw">filter</span>(vuelos, mes <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, dia <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<p>R imprime los resultados o los guarda en una variable. Si deseas hacer ambas cosas puedes escribir toda la línea entre paréntesis:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">(dic25 &lt;-<span class="st"> </span><span class="kw">filter</span>(vuelos, mes <span class="op">==</span><span class="st"> </span><span class="dv">12</span>, dia <span class="op">==</span><span class="st"> </span><span class="dv">25</span>))</a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="co">#&gt; # A tibble: 719 x 19</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb71-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb71-5" data-line-number="5"><span class="co">#&gt; 1  2013    12    25            456              500            -4</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6"><span class="co">#&gt; 2  2013    12    25            524              515             9</span></a>
<a class="sourceLine" id="cb71-7" data-line-number="7"><span class="co">#&gt; 3  2013    12    25            542              540             2</span></a>
<a class="sourceLine" id="cb71-8" data-line-number="8"><span class="co">#&gt; 4  2013    12    25            546              550            -4</span></a>
<a class="sourceLine" id="cb71-9" data-line-number="9"><span class="co">#&gt; 5  2013    12    25            556              600            -4</span></a>
<a class="sourceLine" id="cb71-10" data-line-number="10"><span class="co">#&gt; 6  2013    12    25            557              600            -3</span></a>
<a class="sourceLine" id="cb71-11" data-line-number="11"><span class="co">#&gt; # … with 713 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb71-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb71-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<div id="comparaciones" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Comparaciones</h3>
<p>Para usar el filtrado de manera efectiva, debes saber cómo seleccionar las observaciones que deseas utilizando los operadores de comparación. R proporciona el conjunto estándar: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>!=</code> (no igual) y <code>==</code> (igual).</p>
<p>Cuando comienzas con R, el error más fácil de cometer es usar <code>=</code> en lugar de <code>==</code> cuando se busca igualdad. Cuando esto suceda, obtendrás un error informativo:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">filter</span>(vuelos, <span class="dt">mes =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="co">#&gt; Error: Problem with `filter()` input `..1`.</span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="co">#&gt; ✖ Input `..1` is named.</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="co">#&gt; ℹ This usually means that you&#39;ve used `=` instead of `==`.</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="co">#&gt; ℹ Did you mean `mes == 1`?</span></a></code></pre></div>
<p>Hay otro problema común que puedes encontrar al usar <code>==</code>: los números de coma flotante. ¡Estos resultados pueden sorprenderte!</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="dv">2</span>)<span class="op">^</span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb73-3" data-line-number="3"><span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">49</span> <span class="op">*</span><span class="st"> </span><span class="dv">49</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb73-4" data-line-number="4"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>Las computadoras usan aritmética de precisión finita (obviamente, no pueden almacenar una cantidad infinita de dígitos), así que recuerda que cada número que ves es una aproximación. En lugar de confiar en <code>==</code>, usa <code>near()</code> (cercano, en inglés):</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">near</span>(<span class="kw">sqrt</span>(<span class="dv">2</span>)<span class="op">^</span><span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="kw">near</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">49</span> <span class="op">*</span><span class="st"> </span><span class="dv">49</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</div>
<div id="operadores-lógicos" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Operadores lógicos</h3>
<p>Si tienes múltiples argumentos para <code>filter()</code> estos se combinan con “y”: cada expresión debe ser verdadera para que una fila se incluya en el <em>output</em>. Para otros tipos de combinaciones necesitarás usar operadores Booleanos: <code>&amp;</code> es “y”, <code>|</code> es “o”, y <code>!</code> es “no”. La figura <span class="citation">@ref</span>(fig:bool-ops) muestra el conjunto completo de operaciones Booleanas.</p>
<div class="figure" style="text-align: center"><span id="fig:bool-ops"></span>
<img src="diagrams_w_text_as_path/es/transform-logical.svg" alt="Complete set of boolean operations. `x` is the left-hand circle, `y` is the right-hand circle, and the shaded region show which parts each operator selects." width="70%" />
<p class="caption">
Figure 5.1: Complete set of boolean operations. <code>x</code> is the left-hand circle, <code>y</code> is the right-hand circle, and the shaded region show which parts each operator selects.
</p>
</div>
<p>El siguiente código sirve para encontrar todos los vuelos que partieron en noviembre o diciembre:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="kw">filter</span>(vuelos, mes <span class="op">==</span><span class="st"> </span><span class="dv">11</span> <span class="op">|</span><span class="st"> </span>mes <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</a></code></pre></div>
<p>El orden de las operaciones no funciona como en español. No puedes escribir <code>filter(vuelos, mes == (11 | 12))</code>, que literalmente puede traducirse como “encuentra todos los vuelos que partieron en noviembre o diciembre”. En cambio, encontrará todos los meses que son iguales a <code>11 | 12</code>, una expresión que resulta en ‘TRUE’ (verdadero). En un contexto numérico (como aquí), ‘TRUE’ se convierte en uno, por lo que encuentra todos los vuelos en enero, no en noviembre o diciembre. ¡Esto es bastante confuso!</p>
<p>Una manera rápida y útil para resolver este problema es <code>x %in% y</code> (es decir, x <em>en</em> y). Esto seleccionará cada fila donde <code>x</code> es uno de los valores en<code>y</code>. Podríamos usarlo para reescribir el código de arriba:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1">nov_dic &lt;-<span class="st"> </span><span class="kw">filter</span>(vuelos, mes <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</a></code></pre></div>
<p>A veces puedes simplificar subconjuntos complicados al recordar la ley de De Morgan: <code>!(x &amp; y)</code> es lo mismo que <code>!x | !y</code>, y <code>!(x | y)</code> es lo mismo que <code>!x &amp; !y</code>. Por ejemplo, si deseas encontrar vuelos que no se retrasaron (en llegada o partida) en más de dos horas, puedes usar cualquiera de los dos filtros siguientes:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">filter</span>(vuelos, <span class="op">!</span>(atraso_llegada <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span> <span class="op">|</span><span class="st"> </span>atraso_salida <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span>))</a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="kw">filter</span>(vuelos  , atraso_llegada <span class="op">&lt;=</span><span class="st"> </span><span class="dv">120</span>, atraso_salida <span class="op">&lt;=</span><span class="st"> </span><span class="dv">120</span>)</a></code></pre></div>
<p>Además de <code>&amp;</code> y <code>|</code>, R también tiene <code>&amp;&amp;</code> y <code>||</code>. ¡No los uses aquí! Aprenderás cuándo deberías usarlos en <a href="funciones.html#ejecución-condicional">Ejecución condicional</a>.</p>
<p>Siempre que empieces a usar en <code>filter()</code> expresiones complejas que tengan varias partes, considera convertirlas en variables explícitas. Eso hace que sea mucho más fácil verificar tu trabajo. Aprenderás cómo crear nuevas variables en breve.</p>
</div>
<div id="valores-faltantes" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Valores faltantes</h3>
<p>Una característica importante de R que puede hacer que la comparación sea difícil son los valores faltantes, o <code>NA</code>s (del inglés “no disponibles”). <code>NA</code> representa un valor desconocido, lo que hace que los valores perdidos sean “contagiosos”: casi cualquier operación que involucre un valor desconocido también será desconocida.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="ot">NA</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb78-3" data-line-number="3"><span class="dv">10</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb78-4" data-line-number="4"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb78-5" data-line-number="5"><span class="ot">NA</span> <span class="op">+</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb78-6" data-line-number="6"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb78-7" data-line-number="7"><span class="ot">NA</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb78-8" data-line-number="8"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
<p>El resultado más confuso es este:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
<p>Es más fácil entender por qué esto es cierto con un poco más de contexto:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="co"># Sea x la edad de María. No sabemos qué edad tiene.</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"></a>
<a class="sourceLine" id="cb80-4" data-line-number="4"><span class="co"># Sea y la edad de Juan. No sabemos qué edad tiene.</span></a>
<a class="sourceLine" id="cb80-5" data-line-number="5">y &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb80-6" data-line-number="6"></a>
<a class="sourceLine" id="cb80-7" data-line-number="7"><span class="co"># ¿Tienen Juan y María la misma edad?</span></a>
<a class="sourceLine" id="cb80-8" data-line-number="8">x <span class="op">==</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb80-9" data-line-number="9"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb80-10" data-line-number="10"><span class="co"># ¡No sabemos!</span></a></code></pre></div>
<p>Si deseas determinar si falta un valor, usa <code>is.na()</code>:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">is.na</span>(x)</a>
<a class="sourceLine" id="cb81-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p><code>filter()</code> solo incluye filas donde la condición es <code>TRUE</code>; excluye tanto los valores <code>FALSE</code> como <code>NA</code>. Si deseas conservar valores perdidos, solicítalos explícitamente:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="kw">filter</span>(df, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb82-3" data-line-number="3"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb82-4" data-line-number="4"><span class="co">#&gt;       x</span></a>
<a class="sourceLine" id="cb82-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb82-6" data-line-number="6"><span class="co">#&gt; 1     3</span></a>
<a class="sourceLine" id="cb82-7" data-line-number="7"><span class="kw">filter</span>(df, <span class="kw">is.na</span>(x) <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb82-8" data-line-number="8"><span class="co">#&gt; # A tibble: 2 x 1</span></a>
<a class="sourceLine" id="cb82-9" data-line-number="9"><span class="co">#&gt;       x</span></a>
<a class="sourceLine" id="cb82-10" data-line-number="10"><span class="co">#&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb82-11" data-line-number="11"><span class="co">#&gt; 1    NA</span></a>
<a class="sourceLine" id="cb82-12" data-line-number="12"><span class="co">#&gt; 2     3</span></a></code></pre></div>
</div>
<div id="ejercicios-8" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Encuentra todos los vuelos que:</p></li>
<li><p>Tuvieron un retraso de llegada de dos o más horas</p></li>
<li><p>Volaron a Houston (<code>IAH</code> o<code>HOU</code>)</p></li>
<li><p>Fueron operados por United, American o Delta</p></li>
<li><p>Partieron en invierno (julio, agosto y septiembre)</p></li>
<li><p>Llegaron más de dos horas tarde, pero no salieron tarde</p></li>
<li><p>Se retrasaron por lo menos una hora, pero repusieron más de 30 minutos en vuelo</p></li>
<li><p>Partieron entre la medianoche y las 6 a.m. (incluyente)</p></li>
<li><p>Otra función de <strong>dplyr</strong> que es útil para usar filtros es <code>between()</code>. ¿Qué hace? ¿Puedes usarla para simplificar el código necesario para responder a los desafíos anteriores?</p></li>
<li><p>¿Cuántos vuelos tienen datos faltantes en <code>horario_salida</code>? ¿Qué otras variables tienen valores faltantes? ¿Qué representan estas filas?</p></li>
<li><p>¿Por qué <code>NA ^ 0</code> no es faltante? ¿Por qué <code>NA | TRUE</code> no es faltante? ¿Por qué <code>FALSE &amp; NA</code> no es faltante? ¿Puedes descubrir la regla general? (¡<code>NA * 0</code> es un contraejemplo complicado!)</p></li>
</ol>
</div>
</div>
<div id="reordenar-las-filas-con-arrange" class="section level2">
<h2><span class="header-section-number">5.3</span> Reordenar las filas con <code>arrange()</code></h2>
<p><code>arrange()</code> funciona de manera similar a <code>filter()</code> excepto que en lugar de seleccionar filas, cambia su orden. La función toma un <em>data frame</em> y un conjunto de nombres de columnas (o expresiones más complicadas) para ordenar según ellas. Si proporcionas más de un nombre de columna, cada columna adicional se utilizará para romper empates en los valores de las columnas anteriores:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="kw">arrange</span>(vuelos, anio, mes, dia)</a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="co">#&gt; # A tibble: 336,776 x 19</span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb83-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb83-5" data-line-number="5"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb83-6" data-line-number="6"><span class="co">#&gt; 2  2013     1     1            533              529             4</span></a>
<a class="sourceLine" id="cb83-7" data-line-number="7"><span class="co">#&gt; 3  2013     1     1            542              540             2</span></a>
<a class="sourceLine" id="cb83-8" data-line-number="8"><span class="co">#&gt; 4  2013     1     1            544              545            -1</span></a>
<a class="sourceLine" id="cb83-9" data-line-number="9"><span class="co">#&gt; 5  2013     1     1            554              600            -6</span></a>
<a class="sourceLine" id="cb83-10" data-line-number="10"><span class="co">#&gt; 6  2013     1     1            554              558            -4</span></a>
<a class="sourceLine" id="cb83-11" data-line-number="11"><span class="co">#&gt; # … with 336,770 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb83-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb83-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb83-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb83-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Usa <code>desc()</code> para reordenar por una columna en orden descendente:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">arrange</span>(vuelos, <span class="kw">desc</span>(atraso_salida))</a>
<a class="sourceLine" id="cb84-2" data-line-number="2"><span class="co">#&gt; # A tibble: 336,776 x 19</span></a>
<a class="sourceLine" id="cb84-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb84-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb84-5" data-line-number="5"><span class="co">#&gt; 1  2013     1     9            641              900          1301</span></a>
<a class="sourceLine" id="cb84-6" data-line-number="6"><span class="co">#&gt; 2  2013     6    15           1432             1935          1137</span></a>
<a class="sourceLine" id="cb84-7" data-line-number="7"><span class="co">#&gt; 3  2013     1    10           1121             1635          1126</span></a>
<a class="sourceLine" id="cb84-8" data-line-number="8"><span class="co">#&gt; 4  2013     9    20           1139             1845          1014</span></a>
<a class="sourceLine" id="cb84-9" data-line-number="9"><span class="co">#&gt; 5  2013     7    22            845             1600          1005</span></a>
<a class="sourceLine" id="cb84-10" data-line-number="10"><span class="co">#&gt; 6  2013     4    10           1100             1900           960</span></a>
<a class="sourceLine" id="cb84-11" data-line-number="11"><span class="co">#&gt; # … with 336,770 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb84-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb84-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb84-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb84-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Los valores faltantes siempre se ordenan al final:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="kw">arrange</span>(df, x)</a>
<a class="sourceLine" id="cb85-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 1</span></a>
<a class="sourceLine" id="cb85-4" data-line-number="4"><span class="co">#&gt;       x</span></a>
<a class="sourceLine" id="cb85-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb85-6" data-line-number="6"><span class="co">#&gt; 1     2</span></a>
<a class="sourceLine" id="cb85-7" data-line-number="7"><span class="co">#&gt; 2     5</span></a>
<a class="sourceLine" id="cb85-8" data-line-number="8"><span class="co">#&gt; 3    NA</span></a>
<a class="sourceLine" id="cb85-9" data-line-number="9"><span class="kw">arrange</span>(df, <span class="kw">desc</span>(x))</a>
<a class="sourceLine" id="cb85-10" data-line-number="10"><span class="co">#&gt; # A tibble: 3 x 1</span></a>
<a class="sourceLine" id="cb85-11" data-line-number="11"><span class="co">#&gt;       x</span></a>
<a class="sourceLine" id="cb85-12" data-line-number="12"><span class="co">#&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb85-13" data-line-number="13"><span class="co">#&gt; 1     5</span></a>
<a class="sourceLine" id="cb85-14" data-line-number="14"><span class="co">#&gt; 2     2</span></a>
<a class="sourceLine" id="cb85-15" data-line-number="15"><span class="co">#&gt; 3    NA</span></a></code></pre></div>
<div id="ejercicios-9" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>¿Cómo podrías usar <code>arrange()</code> para ordenar todos los valores faltantes al comienzo? (Sugerencia: usa <code>is.na()</code>).</p></li>
<li><p>Ordena <code>vuelos</code> para encontrar los vuelos más retrasados. Encuentra los vuelos que salieron más temprano.</p></li>
<li><p>Ordena <code>vuelos</code> para encontrar los vuelos más rápidos (que viajaron a mayor velocidad).</p></li>
<li><p>¿Cuáles vuelos viajaron más lejos? ¿Cuál viajó más cerca?</p></li>
</ol>
</div>
</div>
<div id="select" class="section level2">
<h2><span class="header-section-number">5.4</span> Seleccionar columnas con <code>select()</code></h2>
<p>No es raro obtener conjuntos de datos con cientos o incluso miles de variables. En este caso, el primer desafío a menudo se reduce a las variables que realmente te interesan. <code>select()</code> te permite seleccionar rápidamente un subconjunto útil utilizando operaciones basadas en los nombres de las variables.</p>
<p><code>select()</code> no es muy útil con los datos de los vuelos porque solo tenemos 19 variables, pero de todos modos se entiende la idea general:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="co"># Seleccionar columnas por nombre</span></a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="kw">select</span>(vuelos, anio, mes, dia)</a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co">#&gt; # A tibble: 336,776 x 3</span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co">#&gt;    anio   mes   dia</span></a>
<a class="sourceLine" id="cb86-5" data-line-number="5"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb86-6" data-line-number="6"><span class="co">#&gt; 1  2013     1     1</span></a>
<a class="sourceLine" id="cb86-7" data-line-number="7"><span class="co">#&gt; 2  2013     1     1</span></a>
<a class="sourceLine" id="cb86-8" data-line-number="8"><span class="co">#&gt; 3  2013     1     1</span></a>
<a class="sourceLine" id="cb86-9" data-line-number="9"><span class="co">#&gt; 4  2013     1     1</span></a>
<a class="sourceLine" id="cb86-10" data-line-number="10"><span class="co">#&gt; 5  2013     1     1</span></a>
<a class="sourceLine" id="cb86-11" data-line-number="11"><span class="co">#&gt; 6  2013     1     1</span></a>
<a class="sourceLine" id="cb86-12" data-line-number="12"><span class="co">#&gt; # … with 336,770 more rows</span></a>
<a class="sourceLine" id="cb86-13" data-line-number="13"><span class="co"># Seleccionar todas las columnas entre anio y dia (incluyente)</span></a>
<a class="sourceLine" id="cb86-14" data-line-number="14"><span class="kw">select</span>(vuelos, anio<span class="op">:</span>dia)</a>
<a class="sourceLine" id="cb86-15" data-line-number="15"><span class="co">#&gt; # A tibble: 336,776 x 3</span></a>
<a class="sourceLine" id="cb86-16" data-line-number="16"><span class="co">#&gt;    anio   mes   dia</span></a>
<a class="sourceLine" id="cb86-17" data-line-number="17"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb86-18" data-line-number="18"><span class="co">#&gt; 1  2013     1     1</span></a>
<a class="sourceLine" id="cb86-19" data-line-number="19"><span class="co">#&gt; 2  2013     1     1</span></a>
<a class="sourceLine" id="cb86-20" data-line-number="20"><span class="co">#&gt; 3  2013     1     1</span></a>
<a class="sourceLine" id="cb86-21" data-line-number="21"><span class="co">#&gt; 4  2013     1     1</span></a>
<a class="sourceLine" id="cb86-22" data-line-number="22"><span class="co">#&gt; 5  2013     1     1</span></a>
<a class="sourceLine" id="cb86-23" data-line-number="23"><span class="co">#&gt; 6  2013     1     1</span></a>
<a class="sourceLine" id="cb86-24" data-line-number="24"><span class="co">#&gt; # … with 336,770 more rows</span></a>
<a class="sourceLine" id="cb86-25" data-line-number="25"><span class="co"># Seleccionar todas las columnas excepto aquellas entre anio en dia (incluyente)</span></a>
<a class="sourceLine" id="cb86-26" data-line-number="26"><span class="kw">select</span>(vuelos, <span class="op">-</span>(anio<span class="op">:</span>dia))</a>
<a class="sourceLine" id="cb86-27" data-line-number="27"><span class="co">#&gt; # A tibble: 336,776 x 16</span></a>
<a class="sourceLine" id="cb86-28" data-line-number="28"><span class="co">#&gt;   horario_salida salida_programa… atraso_salida horario_llegada llegada_program…</span></a>
<a class="sourceLine" id="cb86-29" data-line-number="29"><span class="co">#&gt;            &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;           &lt;int&gt;            &lt;int&gt;</span></a>
<a class="sourceLine" id="cb86-30" data-line-number="30"><span class="co">#&gt; 1            517              515             2             830              819</span></a>
<a class="sourceLine" id="cb86-31" data-line-number="31"><span class="co">#&gt; 2            533              529             4             850              830</span></a>
<a class="sourceLine" id="cb86-32" data-line-number="32"><span class="co">#&gt; 3            542              540             2             923              850</span></a>
<a class="sourceLine" id="cb86-33" data-line-number="33"><span class="co">#&gt; 4            544              545            -1            1004             1022</span></a>
<a class="sourceLine" id="cb86-34" data-line-number="34"><span class="co">#&gt; 5            554              600            -6             812              837</span></a>
<a class="sourceLine" id="cb86-35" data-line-number="35"><span class="co">#&gt; 6            554              558            -4             740              728</span></a>
<a class="sourceLine" id="cb86-36" data-line-number="36"><span class="co">#&gt; # … with 336,770 more rows, and 11 more variables: atraso_llegada &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb86-37" data-line-number="37"><span class="co">#&gt; #   aerolinea &lt;chr&gt;, vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb86-38" data-line-number="38"><span class="co">#&gt; #   destino &lt;chr&gt;, tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb86-39" data-line-number="39"><span class="co">#&gt; #   minuto &lt;dbl&gt;, fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Hay una serie de funciones auxiliares que puedes usar dentro de <code>select()</code>:</p>
<ul>
<li><p><code>starts_with(&quot;abc&quot;)</code>: coincide con los nombres que comienzan con “abc”.</p></li>
<li><p><code>ends_with(&quot;xyz&quot;)</code>: coincide con los nombres que terminan con “xyz”.</p></li>
<li><p><code>contains(&quot;ijk&quot;)</code>: coincide con los nombres que contienen “ijk”.</p></li>
<li><p><code>matches(&quot;(.)\\1&quot;)</code>: selecciona variables que coinciden con una expresión regular. Esta en particular coincide con cualquier variable que contenga caracteres repetidos. Aprenderás más sobre expresiones regulares en <a href="cadenas-de-caracteres.html#cadenas-de-caracteres">Cadenas de caracteres</a>.</p></li>
<li><p><code>num_range(&quot;x&quot;, 1:3)</code>: coincide con <code>x1</code>,<code>x2</code> y <code>x3</code>.</p></li>
</ul>
<p>Consulta <code>?select</code> para ver más detalles.</p>
<p><code>select()</code> se puede usar para cambiar el nombre de las variables, pero rara vez es útil porque descarta todas las variables que no se mencionan explícitamente. En su lugar, utiliza <code>rename()</code>, que es una variante de <code>select()</code> que mantiene todas las variables que no se mencionan explícitamente:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="kw">rename</span>(vuelos, <span class="dt">cola_num =</span> codigo_cola)</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="co">#&gt; # A tibble: 336,776 x 19</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb87-5" data-line-number="5"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb87-6" data-line-number="6"><span class="co">#&gt; 2  2013     1     1            533              529             4</span></a>
<a class="sourceLine" id="cb87-7" data-line-number="7"><span class="co">#&gt; 3  2013     1     1            542              540             2</span></a>
<a class="sourceLine" id="cb87-8" data-line-number="8"><span class="co">#&gt; 4  2013     1     1            544              545            -1</span></a>
<a class="sourceLine" id="cb87-9" data-line-number="9"><span class="co">#&gt; 5  2013     1     1            554              600            -6</span></a>
<a class="sourceLine" id="cb87-10" data-line-number="10"><span class="co">#&gt; 6  2013     1     1            554              558            -4</span></a>
<a class="sourceLine" id="cb87-11" data-line-number="11"><span class="co">#&gt; # … with 336,770 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb87-12" data-line-number="12"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb87-13" data-line-number="13"><span class="co">#&gt; #   vuelo &lt;int&gt;, cola_num &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb87-14" data-line-number="14"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb87-15" data-line-number="15"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<p>Otra opción es usar <code>select()</code> junto con el auxiliar <code>everything()</code> (<em>todo</em>, en inglés). Esto es útil si tienes un grupo de variables que te gustaría mover al comienzo del <em>data frame</em>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">select</span>(vuelos, fecha_hora, tiempo_vuelo, <span class="kw">everything</span>())</a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="co">#&gt; # A tibble: 336,776 x 19</span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="co">#&gt;   fecha_hora          tiempo_vuelo  anio   mes   dia horario_salida</span></a>
<a class="sourceLine" id="cb88-4" data-line-number="4"><span class="co">#&gt;   &lt;dttm&gt;                     &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb88-5" data-line-number="5"><span class="co">#&gt; 1 2013-01-01 05:00:00          227  2013     1     1            517</span></a>
<a class="sourceLine" id="cb88-6" data-line-number="6"><span class="co">#&gt; 2 2013-01-01 05:00:00          227  2013     1     1            533</span></a>
<a class="sourceLine" id="cb88-7" data-line-number="7"><span class="co">#&gt; 3 2013-01-01 05:00:00          160  2013     1     1            542</span></a>
<a class="sourceLine" id="cb88-8" data-line-number="8"><span class="co">#&gt; 4 2013-01-01 05:00:00          183  2013     1     1            544</span></a>
<a class="sourceLine" id="cb88-9" data-line-number="9"><span class="co">#&gt; 5 2013-01-01 06:00:00          116  2013     1     1            554</span></a>
<a class="sourceLine" id="cb88-10" data-line-number="10"><span class="co">#&gt; 6 2013-01-01 05:00:00          150  2013     1     1            554</span></a>
<a class="sourceLine" id="cb88-11" data-line-number="11"><span class="co">#&gt; # … with 336,770 more rows, and 13 more variables: salida_programada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb88-12" data-line-number="12"><span class="co">#&gt; #   atraso_salida &lt;dbl&gt;, horario_llegada &lt;int&gt;, llegada_programada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb88-13" data-line-number="13"><span class="co">#&gt; #   atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;, vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb88-14" data-line-number="14"><span class="co">#&gt; #   origen &lt;chr&gt;, destino &lt;chr&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;</span></a></code></pre></div>
<div id="ejercicios-10" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Haz una lluvia de ideas sobre tantas maneras como sea posible para seleccionar <code>horario_salida</code>,<code>atraso_salida</code>,<code>horario_llegada</code>, y<code>atraso_llegada</code> de <code>vuelos</code>.</p></li>
<li><p>¿Qué sucede si incluyes el nombre de una variable varias veces en una llamada a <code>select()</code>?</p></li>
<li><p>¿Qué hace la función <code>one_of()</code>? ¡¿Por qué podría ser útil en conjunto con este vector?</p></li>
</ol>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1">vars &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;anio&quot;</span>, <span class="st">&quot;mes&quot;</span>, <span class="st">&quot;dia&quot;</span>, <span class="st">&quot;atraso_salida&quot;</span>, <span class="st">&quot;atraso_llegada&quot;</span>)</a></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>¿Te sorprende el resultado de ejecutar el siguiente código? ¿Cómo tratan por defecto las funciones auxiliares de <code>select()</code> a las palabras en mayúsculas o en minúsculas? ¿Cómo puedes cambiar ese comportamiento predeterminado?</li>
</ol>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">select</span>(vuelos, <span class="kw">contains</span>(<span class="st">&quot;SALIDA&quot;</span>))</a></code></pre></div>
</div>
</div>
<div id="añadir-nuevas-variables-con-mutate" class="section level2">
<h2><span class="header-section-number">5.5</span> Añadir nuevas variables con <code>mutate()</code></h2>
<p>Además de seleccionar conjuntos de columnas existentes, a menudo es útil crear nuevas columnas en función de columnas existentes. Ese es el trabajo de <code>mutate()</code> (del inglés <em>mutar</em> o <em>transformar</em>).</p>
<p><code>mutate()</code> siempre agrega nuevas columnas al final de un conjunto de datos, así que comenzaremos creando un conjunto de datos más pequeño para que podamos ver las nuevas variables. Recuerda que cuando usas RStudio, la manera más fácil de ver todas las columnas es <code>View()</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1">vuelos_sml &lt;-<span class="st"> </span><span class="kw">select</span>(vuelos,</a>
<a class="sourceLine" id="cb91-2" data-line-number="2">  anio<span class="op">:</span>dia,</a>
<a class="sourceLine" id="cb91-3" data-line-number="3">  <span class="kw">starts_with</span>(<span class="st">&quot;atraso&quot;</span>),</a>
<a class="sourceLine" id="cb91-4" data-line-number="4">  distancia,</a>
<a class="sourceLine" id="cb91-5" data-line-number="5">  tiempo_vuelo</a>
<a class="sourceLine" id="cb91-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb91-7" data-line-number="7"><span class="kw">mutate</span>(vuelos_sml,</a>
<a class="sourceLine" id="cb91-8" data-line-number="8">  <span class="dt">ganancia =</span> atraso_salida <span class="op">-</span><span class="st"> </span>atraso_llegada,</a>
<a class="sourceLine" id="cb91-9" data-line-number="9">  <span class="dt">velocidad =</span> distancia <span class="op">/</span><span class="st"> </span>tiempo_vuelo <span class="op">*</span><span class="st"> </span><span class="dv">60</span></a>
<a class="sourceLine" id="cb91-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb91-11" data-line-number="11"><span class="co">#&gt; # A tibble: 336,776 x 9</span></a>
<a class="sourceLine" id="cb91-12" data-line-number="12"><span class="co">#&gt;    anio   mes   dia atraso_salida atraso_llegada distancia tiempo_vuelo ganancia</span></a>
<a class="sourceLine" id="cb91-13" data-line-number="13"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb91-14" data-line-number="14"><span class="co">#&gt; 1  2013     1     1             2             11      1400          227       -9</span></a>
<a class="sourceLine" id="cb91-15" data-line-number="15"><span class="co">#&gt; 2  2013     1     1             4             20      1416          227      -16</span></a>
<a class="sourceLine" id="cb91-16" data-line-number="16"><span class="co">#&gt; 3  2013     1     1             2             33      1089          160      -31</span></a>
<a class="sourceLine" id="cb91-17" data-line-number="17"><span class="co">#&gt; 4  2013     1     1            -1            -18      1576          183       17</span></a>
<a class="sourceLine" id="cb91-18" data-line-number="18"><span class="co">#&gt; 5  2013     1     1            -6            -25       762          116       19</span></a>
<a class="sourceLine" id="cb91-19" data-line-number="19"><span class="co">#&gt; 6  2013     1     1            -4             12       719          150      -16</span></a>
<a class="sourceLine" id="cb91-20" data-line-number="20"><span class="co">#&gt; # … with 336,770 more rows, and 1 more variable: velocidad &lt;dbl&gt;</span></a></code></pre></div>
<p>Ten en cuenta que puedes hacer referencia a las columnas que acabas de crear:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">mutate</span>(vuelos_sml,</a>
<a class="sourceLine" id="cb92-2" data-line-number="2">  <span class="dt">ganancia =</span> atraso_salida <span class="op">-</span><span class="st"> </span>atraso_llegada,</a>
<a class="sourceLine" id="cb92-3" data-line-number="3">  <span class="dt">horas =</span> tiempo_vuelo <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">  <span class="dt">ganacia_por_hora =</span> ganancia <span class="op">/</span><span class="st"> </span>horas</a>
<a class="sourceLine" id="cb92-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb92-6" data-line-number="6"><span class="co">#&gt; # A tibble: 336,776 x 10</span></a>
<a class="sourceLine" id="cb92-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia atraso_salida atraso_llegada distancia tiempo_vuelo ganancia</span></a>
<a class="sourceLine" id="cb92-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb92-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1             2             11      1400          227       -9</span></a>
<a class="sourceLine" id="cb92-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     1             4             20      1416          227      -16</span></a>
<a class="sourceLine" id="cb92-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     1             2             33      1089          160      -31</span></a>
<a class="sourceLine" id="cb92-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     1            -1            -18      1576          183       17</span></a>
<a class="sourceLine" id="cb92-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     1            -6            -25       762          116       19</span></a>
<a class="sourceLine" id="cb92-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     1            -4             12       719          150      -16</span></a>
<a class="sourceLine" id="cb92-15" data-line-number="15"><span class="co">#&gt; # … with 336,770 more rows, and 2 more variables: horas &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb92-16" data-line-number="16"><span class="co">#&gt; #   ganacia_por_hora &lt;dbl&gt;</span></a></code></pre></div>
<p>Si solo quieres conservar las nuevas variables, usa <code>transmute()</code>:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">transmute</span>(vuelos,</a>
<a class="sourceLine" id="cb93-2" data-line-number="2">  <span class="dt">ganancia =</span> atraso_salida <span class="op">-</span><span class="st"> </span>atraso_llegada,</a>
<a class="sourceLine" id="cb93-3" data-line-number="3">  <span class="dt">horas =</span> tiempo_vuelo <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,</a>
<a class="sourceLine" id="cb93-4" data-line-number="4">  <span class="dt">ganancia_por_hora =</span> ganancia <span class="op">/</span><span class="st"> </span>horas</a>
<a class="sourceLine" id="cb93-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb93-6" data-line-number="6"><span class="co">#&gt; # A tibble: 336,776 x 3</span></a>
<a class="sourceLine" id="cb93-7" data-line-number="7"><span class="co">#&gt;   ganancia horas ganancia_por_hora</span></a>
<a class="sourceLine" id="cb93-8" data-line-number="8"><span class="co">#&gt;      &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb93-9" data-line-number="9"><span class="co">#&gt; 1       -9  3.78             -2.38</span></a>
<a class="sourceLine" id="cb93-10" data-line-number="10"><span class="co">#&gt; 2      -16  3.78             -4.23</span></a>
<a class="sourceLine" id="cb93-11" data-line-number="11"><span class="co">#&gt; 3      -31  2.67            -11.6 </span></a>
<a class="sourceLine" id="cb93-12" data-line-number="12"><span class="co">#&gt; 4       17  3.05              5.57</span></a>
<a class="sourceLine" id="cb93-13" data-line-number="13"><span class="co">#&gt; 5       19  1.93              9.83</span></a>
<a class="sourceLine" id="cb93-14" data-line-number="14"><span class="co">#&gt; 6      -16  2.5              -6.4 </span></a>
<a class="sourceLine" id="cb93-15" data-line-number="15"><span class="co">#&gt; # … with 336,770 more rows</span></a></code></pre></div>
<div id="mutate-funs" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Funciones de creación útiles</h3>
<p>Hay muchas funciones para crear nuevas variables que puedes usar con <code>mutate()</code>. La propiedad clave es que la función debe ser vectorizada: debe tomar un vector de valores como <em>input</em>, y devolver un vector con el mismo número de valores como <em>output</em>. No hay forma de enumerar todas las posibles funciones que podrías usar, pero aquí hay una selección de funciones que frecuentemente son útiles:</p>
<ul>
<li><p>Operadores aritméticos: <code>+</code>, <code>-</code>,<code>*</code>,<code>/</code>,<code>^</code>. Todos están vectorizados usando las llamadas “reglas de reciclaje”. Si un parámetro es más corto que el otro, se extenderá automáticamente para tener la misma longitud. Esto es muy útil cuando uno de los argumentos es un solo número: <code>tiempo_vuelo / 60</code>, <code>horas * 60 + minuto</code>, etc.</p>
<p>Los operadores aritméticos también son útiles junto con las funciones de agregar que aprenderás más adelante. Por ejemplo, <code>x / sum(x)</code> calcula la proporción de un total, y <code>y - mean(y)</code> calcula la diferencia de la media.</p></li>
<li><p>Aritmética modular: <code>%/%</code> (división entera) y <code>%%</code> (resto), donde <code>x == y * (x %/% y) + (x %% y)</code>. La aritmética modular es una herramienta útil porque te permite dividir enteros en partes. Por ejemplo, en el conjunto de datos de vuelos, puedes calcular <code>hora</code> y<code>minutos</code> de <code>horario_salida</code> con:</p></li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">transmute</span>(vuelos,</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">  horario_salida,</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">  <span class="dt">hora =</span> horario_salida <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>,</a>
<a class="sourceLine" id="cb94-4" data-line-number="4">  <span class="dt">minuto =</span> horario_salida <span class="op">%%</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb94-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb94-6" data-line-number="6"><span class="co">#&gt; # A tibble: 336,776 x 3</span></a>
<a class="sourceLine" id="cb94-7" data-line-number="7"><span class="co">#&gt;   horario_salida  hora minuto</span></a>
<a class="sourceLine" id="cb94-8" data-line-number="8"><span class="co">#&gt;            &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb94-9" data-line-number="9"><span class="co">#&gt; 1            517     5     17</span></a>
<a class="sourceLine" id="cb94-10" data-line-number="10"><span class="co">#&gt; 2            533     5     33</span></a>
<a class="sourceLine" id="cb94-11" data-line-number="11"><span class="co">#&gt; 3            542     5     42</span></a>
<a class="sourceLine" id="cb94-12" data-line-number="12"><span class="co">#&gt; 4            544     5     44</span></a>
<a class="sourceLine" id="cb94-13" data-line-number="13"><span class="co">#&gt; 5            554     5     54</span></a>
<a class="sourceLine" id="cb94-14" data-line-number="14"><span class="co">#&gt; 6            554     5     54</span></a>
<a class="sourceLine" id="cb94-15" data-line-number="15"><span class="co">#&gt; # … with 336,770 more rows</span></a></code></pre></div>
<ul>
<li><p>Logaritmos: <code>log()</code>, <code>log2()</code>, <code>log10()</code>. Los logaritmos son increíblemente útiles como transformación para trabajar con datos con múltiples órdenes de magnitud. También convierten las relaciones multiplicativas en aditivas, una característica que retomaremos en los capítulos sobre modelos.</p>
<p>En igualdad de condiciones, recomendamos usar <code>log2()</code> porque es más fácil de interpretar: una diferencia de 1 en la escala de registro corresponde a la duplicación de la escala original y una diferencia de -1 corresponde a dividir a la mitad.</p></li>
<li><p>Rezagos: <code>lead()</code> y <code>lag()</code> te permiten referirte a un valor adelante o un valor atrás (con rezago). Esto te permite calcular as diferencias móviles (por ejemplo, <code>x - lag(x)</code>) o encontrar cuándo cambian los valores (<code>x! = lag (x)</code>). Estos comandos son más útiles cuando se utilizan junto con <code>group_by()</code>, algo que aprenderás en breve.</p></li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1">(x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="kw">lag</span>(x)</a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="co">#&gt;  [1] NA  1  2  3  4  5  6  7  8  9</span></a>
<a class="sourceLine" id="cb95-5" data-line-number="5"><span class="kw">lead</span>(x)</a>
<a class="sourceLine" id="cb95-6" data-line-number="6"><span class="co">#&gt;  [1]  2  3  4  5  6  7  8  9 10 NA</span></a></code></pre></div>
<ul>
<li>Agregados acumulativos y móviles: R proporciona funciones para ejecutar sumas, productos, mínimos y máximos: <code>cumsum()</code>, <code>cumprod()</code>, <code>cummin()</code>, <code>cummax()</code>; <strong>dplyr</strong>, por su parte, proporciona <code>cummean()</code> para las medias acumuladas. Si necesitas calcular agregados móviles (es decir, una suma calculada en una ventana móvil), prueba el paquete <strong>RcppRoll</strong>.</li>
</ul>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">x</a>
<a class="sourceLine" id="cb96-2" data-line-number="2"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></a>
<a class="sourceLine" id="cb96-3" data-line-number="3"><span class="kw">cumsum</span>(x)</a>
<a class="sourceLine" id="cb96-4" data-line-number="4"><span class="co">#&gt;  [1]  1  3  6 10 15 21 28 36 45 55</span></a>
<a class="sourceLine" id="cb96-5" data-line-number="5"><span class="kw">cummean</span>(x)</a>
<a class="sourceLine" id="cb96-6" data-line-number="6"><span class="co">#&gt;  [1] 1.00 1.00 1.33 1.75 2.20 2.67 3.14 3.62 4.11 4.60</span></a></code></pre></div>
<ul>
<li><p>Comparaciones lógicas: <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code> sobre las cuales aprendiste antes. Si estás haciendo una secuencia compleja de operaciones lógicas, es a menudo una buena idea almacenar los valores provisionales en nuevas variables para que puedas comprobar que cada paso funciona como se espera.</p></li>
<li><p>Ordenamiento: hay una serie de funciones de ordenamiento (ranking), pero deberías comenzar con <code>min_rank()</code>. Esta función realiza el tipo más común de ordenamiento (por ejemplo, primero, segundo, tercero, etc.). El valor predeterminado otorga la menor posición a los valores más pequeños; usa <code>desc(x)</code> para dar la menor posición a los valores más grandes.</p></li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb97-2" data-line-number="2"><span class="kw">min_rank</span>(y)</a>
<a class="sourceLine" id="cb97-3" data-line-number="3"><span class="co">#&gt; [1]  1  2  2 NA  4  5</span></a>
<a class="sourceLine" id="cb97-4" data-line-number="4"><span class="kw">min_rank</span>(<span class="kw">desc</span>(y))</a>
<a class="sourceLine" id="cb97-5" data-line-number="5"><span class="co">#&gt; [1]  5  3  3 NA  2  1</span></a></code></pre></div>
<p>Si <code>min_rank()</code> no hace lo que necesitas, consulta las variantes <code>row_number()</code>, <code>dense_rank()</code>, <code>percent_rank()</code>, <code>cume_dist()</code>,<code>quantile()</code>. Revisa sus páginas de ayuda para más detalles.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="kw">row_number</span>(y)</a>
<a class="sourceLine" id="cb98-2" data-line-number="2"><span class="co">#&gt; [1]  1  2  3 NA  4  5</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3"><span class="kw">dense_rank</span>(y)</a>
<a class="sourceLine" id="cb98-4" data-line-number="4"><span class="co">#&gt; [1]  1  2  2 NA  3  4</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5"><span class="kw">percent_rank</span>(y)</a>
<a class="sourceLine" id="cb98-6" data-line-number="6"><span class="co">#&gt; [1] 0.00 0.25 0.25   NA 0.75 1.00</span></a>
<a class="sourceLine" id="cb98-7" data-line-number="7"><span class="kw">cume_dist</span>(y)</a>
<a class="sourceLine" id="cb98-8" data-line-number="8"><span class="co">#&gt; [1] 0.2 0.6 0.6  NA 0.8 1.0</span></a></code></pre></div>
</div>
<div id="ejercicios-11" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Las variables <code>horario_salida</code> y <code>salida_programada</code> tienen un formato conveniente para leer, pero es difícil realizar cualquier cálculo con ellas porque no son realmente números continuos. Transfórmalas hacia un formato más conveniente como número de minutos desde la medianoche.</p></li>
<li><p>Compara <code>tiempo_vuelo</code> con <code>horario_llegada - horario_salida</code>. ¿Qué esperas ver? ¿Qué ves? ¿Qué necesitas hacer para arreglarlo?</p></li>
<li><p>Compara <code>horario_salida</code>, <code>salida_programada</code>, y <code>atraso_salida</code>. ¿Cómo esperarías que esos tres números estén relacionados?</p></li>
<li><p>Encuentra los 10 vuelos más retrasados utilizando una función de ordenamiento. ¿Cómo quieres manejar los empates? Lee atentamente la documentación de <code>min_rank()</code>.</p></li>
<li><p>¿Qué devuelve <code>1:3 + 1:10</code>? ¿Por qué?</p></li>
<li><p>¿Qué funciones trigonométricas proporciona R?</p></li>
</ol>
</div>
</div>
<div id="resúmenes-agrupados-con-summarise" class="section level2">
<h2><span class="header-section-number">5.6</span> Resúmenes agrupados con <code>summarise()</code></h2>
<p>El último verbo clave es <code>summarise()</code> (<em>resumir</em>, en inglés). Se encarga de colapsar un <em>data frame</em> en una sola fila:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="kw">summarise</span>(vuelos, <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_salida, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3"><span class="co">#&gt;   atraso</span></a>
<a class="sourceLine" id="cb99-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb99-5" data-line-number="5"><span class="co">#&gt; 1   12.6</span></a></code></pre></div>
<p>(Volveremos a lo que significa <code>na.rm = TRUE</code> en muy poco tiempo).</p>
<p><code>summarise()</code> no es muy útil a menos que lo enlacemos con <code>group_by()</code>. Esto cambia la unidad de análisis del conjunto de datos completo a grupos individuales. Luego, cuando uses los verbos <strong>dplyr</strong> en un <em>data frame</em> agrupado, estos se aplicarán automáticamente “por grupo”. Por ejemplo, si aplicamos exactamente el mismo código a un <em>data frame</em> agrupado por fecha, obtenemos el retraso promedio por fecha:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">por_dia &lt;-<span class="st"> </span><span class="kw">group_by</span>(vuelos, anio, mes, dia)</a>
<a class="sourceLine" id="cb100-2" data-line-number="2"><span class="kw">summarise</span>(por_dia, <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_salida, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb100-3" data-line-number="3"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb100-5" data-line-number="5"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb100-6" data-line-number="6"><span class="co">#&gt;    anio   mes   dia atraso</span></a>
<a class="sourceLine" id="cb100-7" data-line-number="7"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb100-8" data-line-number="8"><span class="co">#&gt; 1  2013     1     1  11.5 </span></a>
<a class="sourceLine" id="cb100-9" data-line-number="9"><span class="co">#&gt; 2  2013     1     2  13.9 </span></a>
<a class="sourceLine" id="cb100-10" data-line-number="10"><span class="co">#&gt; 3  2013     1     3  11.0 </span></a>
<a class="sourceLine" id="cb100-11" data-line-number="11"><span class="co">#&gt; 4  2013     1     4   8.95</span></a>
<a class="sourceLine" id="cb100-12" data-line-number="12"><span class="co">#&gt; 5  2013     1     5   5.73</span></a>
<a class="sourceLine" id="cb100-13" data-line-number="13"><span class="co">#&gt; 6  2013     1     6   7.15</span></a>
<a class="sourceLine" id="cb100-14" data-line-number="14"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<p>Juntos <code>group_by()</code> y <code>summarise()</code> proporcionan una de las herramientas que más comúnmente usarás cuando trabajes con <strong>dplyr</strong>: resúmenes agrupados. Pero antes de ir más allá con esto, tenemos que introducir una idea nueva y poderosa: el <em>pipe</em> (pronunciado /paip/, que en inglés significa ducto o tubería).</p>
<div id="combinación-de-múltiples-operaciones-con-el-pipe" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Combinación de múltiples operaciones con el <em>pipe</em></h3>
<p>Imagina que queremos explorar la relación entre la distancia y el atraso promedio para cada ubicación. Usando lo que sabes acerca de <strong>dplyr</strong>, podrías escribir un código como este:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">por_destino &lt;-<span class="st"> </span><span class="kw">group_by</span>(vuelos, destino)</a>
<a class="sourceLine" id="cb101-2" data-line-number="2">atraso &lt;-<span class="st"> </span><span class="kw">summarise</span>(por_destino,</a>
<a class="sourceLine" id="cb101-3" data-line-number="3">  <span class="dt">conteo =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb101-4" data-line-number="4">  <span class="dt">distancia =</span> <span class="kw">mean</span>(distancia, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb101-5" data-line-number="5">  <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_llegada, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb101-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb101-7" data-line-number="7"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb101-8" data-line-number="8">atraso &lt;-<span class="st"> </span><span class="kw">filter</span>(atraso, conteo <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, destino <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)</a>
<a class="sourceLine" id="cb101-9" data-line-number="9"></a>
<a class="sourceLine" id="cb101-10" data-line-number="10"><span class="co"># Parece que las demoras aumentan con las distancias hasta ~ 750 millas</span></a>
<a class="sourceLine" id="cb101-11" data-line-number="11"><span class="co"># y luego disminuyen. ¿Tal vez a medida que los vuelos se hacen más </span></a>
<a class="sourceLine" id="cb101-12" data-line-number="12"><span class="co"># largos, hay más habilidad para compensar las demoras en el aire?</span></a>
<a class="sourceLine" id="cb101-13" data-line-number="13"></a>
<a class="sourceLine" id="cb101-14" data-line-number="14"><span class="kw">ggplot</span>(<span class="dt">data =</span> atraso, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> distancia, <span class="dt">y =</span> atraso)) <span class="op">+</span></a>
<a class="sourceLine" id="cb101-15" data-line-number="15"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> conteo), <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb101-16" data-line-number="16"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb101-17" data-line-number="17"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span></a></code></pre></div>
<p><img src="05-transform_files/figure-html/unnamed-chunk-35-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Hay tres pasos para preparar esta información:</p>
<ol style="list-style-type: decimal">
<li><p>Agrupar los vuelos por destino.</p></li>
<li><p>Resumir para calcular la distancia, la demora promedio y el número de vuelos en cada grupo.</p></li>
<li><p>Filtrar para eliminar puntos ruidosos y el aeropuerto de Honolulu, que está casi dos veces más lejos que el próximo aeropuerto más cercano.</p></li>
</ol>
<p>Es un poco frustrante escribir este código porque tenemos que dar un nombre a cada <em>data frame</em> intermedio, incluso si el <em>data frame</em> en sí mismo no nos importa. Nombrar cosas es difícil y enlentece nuestro análisis.</p>
<p>Hay otra forma de abordar el mismo problema con el <em>pipe</em>, <code>%&gt;%</code>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">atrasos &lt;-<span class="st"> </span>vuelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(destino) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb102-4" data-line-number="4">    <span class="dt">conteo =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb102-5" data-line-number="5">    <span class="dt">distancia =</span> <span class="kw">mean</span>(distancia, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb102-6" data-line-number="6">    <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_llegada, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb102-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-8" data-line-number="8"><span class="st">  </span><span class="kw">filter</span>(conteo <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, destino <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)</a>
<a class="sourceLine" id="cb102-9" data-line-number="9"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a></code></pre></div>
<p>Este código se enfoca en las transformaciones, no en lo que se está transformando, lo que hace que sea más fácil de leer. Puedes leerlo como una serie de declaraciones imperativas: agrupa, luego resume y luego filtra. Como sugiere esta lectura, una buena forma de pronunciar <code>%&gt;%</code> cuando se lee el código es “luego”.</p>
<p>Lo que ocurre detrás del código, es que <code>x %&gt;% f(y)</code> se convierte en <code>f(x, y)</code>, y <code>x %&gt;% f(y) %&gt;% g(z)</code> se convierte en <code>g(f(x, y), z)</code> y así sucesivamente. Puedes usar el <em>pipe</em> para reescribir múltiples operaciones de forma que puedas leer de izquierda a derecha, de arriba hacia abajo. Usaremos <em>pipes</em> con frecuencia a partir de ahora porque mejora considerablemente la legibilidad del código. Volveremos a este tema con más detalles en <a href="pipes.html#pipes">pipes</a>.</p>
<p>Trabajar con el <em>pipe</em> es uno de los criterios clave para pertenecer al tidyverse. La única excepción es <strong>ggplot2</strong>: se escribió antes de que se descubriera el <em>pipe</em>. Lamentablemente, la siguiente iteración de <strong>ggplot2</strong>, ggvis, que sí utiliza el <em>pipe</em>, aún no está lista para el horario estelar.</p>
</div>
<div id="valores-faltantes-1" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Valores faltantes</h3>
<p>Es posible que te hayas preguntado sobre el argumento <code>na.rm</code> que utilizamos anteriormente. ¿Qué pasa si no lo configuramos?</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">vuelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb103-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(atraso_salida))</a>
<a class="sourceLine" id="cb103-4" data-line-number="4"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb103-5" data-line-number="5"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb103-6" data-line-number="6"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb103-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia  mean</span></a>
<a class="sourceLine" id="cb103-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb103-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1    NA</span></a>
<a class="sourceLine" id="cb103-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     2    NA</span></a>
<a class="sourceLine" id="cb103-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     3    NA</span></a>
<a class="sourceLine" id="cb103-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     4    NA</span></a>
<a class="sourceLine" id="cb103-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     5    NA</span></a>
<a class="sourceLine" id="cb103-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     6    NA</span></a>
<a class="sourceLine" id="cb103-15" data-line-number="15"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<p>¡Obtenemos muchos valores faltantes! Esto se debe a que las funciones de agregación obedecen la regla habitual de valores faltantes: si hay uno en el <em>input</em>, el <em>output</em> también será un valor faltante. Afortunadamente, todas las funciones de agregación tienen un argumento <code>na.rm</code> que elimina los valores faltantes antes del cálculo:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">vuelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(atraso_salida, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb104-4" data-line-number="4"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb104-5" data-line-number="5"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb104-6" data-line-number="6"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb104-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia  mean</span></a>
<a class="sourceLine" id="cb104-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb104-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1 11.5 </span></a>
<a class="sourceLine" id="cb104-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     2 13.9 </span></a>
<a class="sourceLine" id="cb104-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     3 11.0 </span></a>
<a class="sourceLine" id="cb104-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     4  8.95</span></a>
<a class="sourceLine" id="cb104-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     5  5.73</span></a>
<a class="sourceLine" id="cb104-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     6  7.15</span></a>
<a class="sourceLine" id="cb104-15" data-line-number="15"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<p>En este caso, en el que los valores faltantes representan vuelos cancelados, también podríamos abordar el problema eliminando primero este tipo de vuelos. Guardaremos este conjunto de datos para poder reutilizarlo en los siguientes ejemplos.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1">no_cancelados &lt;-<span class="st"> </span>vuelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(atraso_salida), <span class="op">!</span><span class="kw">is.na</span>(atraso_llegada))</a>
<a class="sourceLine" id="cb105-3" data-line-number="3"></a>
<a class="sourceLine" id="cb105-4" data-line-number="4">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(atraso_salida))</a>
<a class="sourceLine" id="cb105-7" data-line-number="7"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb105-8" data-line-number="8"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb105-9" data-line-number="9"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb105-10" data-line-number="10"><span class="co">#&gt;    anio   mes   dia  mean</span></a>
<a class="sourceLine" id="cb105-11" data-line-number="11"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb105-12" data-line-number="12"><span class="co">#&gt; 1  2013     1     1 11.4 </span></a>
<a class="sourceLine" id="cb105-13" data-line-number="13"><span class="co">#&gt; 2  2013     1     2 13.7 </span></a>
<a class="sourceLine" id="cb105-14" data-line-number="14"><span class="co">#&gt; 3  2013     1     3 10.9 </span></a>
<a class="sourceLine" id="cb105-15" data-line-number="15"><span class="co">#&gt; 4  2013     1     4  8.97</span></a>
<a class="sourceLine" id="cb105-16" data-line-number="16"><span class="co">#&gt; 5  2013     1     5  5.73</span></a>
<a class="sourceLine" id="cb105-17" data-line-number="17"><span class="co">#&gt; 6  2013     1     6  7.15</span></a>
<a class="sourceLine" id="cb105-18" data-line-number="18"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
</div>
<div id="conteos" class="section level3">
<h3><span class="header-section-number">5.6.3</span> Conteos</h3>
<p>Siempre que realices una agregación, es una buena idea incluir un conteo (<code>n()</code>) o un recuento de valores no faltantes (<code>sum(!is.na(x))</code>). De esta forma, puedes verificar que no estás sacando conclusiones basadas en cantidades muy pequeñas de datos. Por ejemplo, veamos los aviones (identificados por su número de cola) que tienen las demoras promedio más altas:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">atrasos &lt;-<span class="st"> </span>no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(codigo_cola) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb106-4" data-line-number="4">   <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_llegada)</a>
<a class="sourceLine" id="cb106-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb106-6" data-line-number="6"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7"></a>
<a class="sourceLine" id="cb106-8" data-line-number="8"><span class="kw">ggplot</span>(<span class="dt">data =</span> atrasos, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> atraso)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">10</span>)</a></code></pre></div>
<p><img src="05-transform_files/figure-html/unnamed-chunk-40-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>¡Hay algunos aviones que tienen una demora <em>promedio</em> de 5 horas (300 minutos)!</p>
<p>La historia es en realidad un poco más matizada. Podemos obtener más información si hacemos un diagrama de dispersión del número de vuelos contra la demora promedio:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">atrasos &lt;-<span class="st"> </span>no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(codigo_cola) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb107-4" data-line-number="4">    <span class="dt">atraso =</span> <span class="kw">mean</span>(atraso_llegada, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb107-5" data-line-number="5">    <span class="dt">n =</span> <span class="kw">n</span>()</a>
<a class="sourceLine" id="cb107-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb107-7" data-line-number="7"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8"></a>
<a class="sourceLine" id="cb107-9" data-line-number="9"><span class="kw">ggplot</span>(<span class="dt">data =</span> atrasos, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> atraso)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</a></code></pre></div>
<p><img src="05-transform_files/figure-html/unnamed-chunk-41-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>No es sorprendente que haya una mayor variación en el promedio de retraso cuando hay pocos vuelos. La forma de este gráfico es muy característica: cuando trazas un promedio (o cualquier otra medida de resumen) contra el tamaño del grupo, verás que la variación decrece a medida que el tamaño de muestra aumenta.</p>
<p>Cuando se observa este tipo de gráficos, resulta útil eliminar los grupos con menor número de observaciones, ya que puedes ver más del patrón y menos de la variación extrema de los grupos pequeños. Esto es lo que hace el siguiente bloque de código. También te ofrece una manera muy útil para integrar <strong>ggplot2</strong> en el flujo de trabajo de <strong>dplyr</strong>. Es un poco incómodo tener que cambiar de <code>%&gt;%</code> a <code>+</code>, pero una vez que entiendas el código, verás que es bastante conveniente.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">atrasos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">25</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> atraso)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb108-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</a></code></pre></div>
<p><img src="05-transform_files/figure-html/unnamed-chunk-42-1.png" width="70%" style="display: block; margin: auto;" /></p>
<hr />
<p>RStudio tip: un atajo en tu teclado que puede ser muy útil es Cmd/Ctrl + Shift + P. Este reenvía el fragmento enviado previamente del editor a la consola. Esto es muy útil cuando por ejemplo estás explorando el valor de <code>n</code> en el ejemplo anterior. Envías todo el bloque a la consola una vez con Cmd / Ctrl + Enter, y luego modificas el valor de <code>n</code> y presionas Cmd / Ctrl + Shift + P para reenviar el bloque completo.</p>
<hr />
<p>Hay otra variación común de este tipo de patrón. Veamos cómo el rendimiento promedio de los bateadores en el béisbol está relacionado con el número de veces que les toca batear Aquí utilizaremos el conjunto de datos de <code>bateadores</code> para calcular el promedio de bateo (número de bateos / número de intentos) de cada jugador de béisbol de Grandes Ligas.</p>
<p>Cuando graficamos la habilidad del bateador (medido por el promedio de bateo, <code>pb</code>) contra el número de oportunidades para golpear la pelota (medido por al bate,<code>ab</code>), verás dos patrones:</p>
<ol style="list-style-type: decimal">
<li><p>Como en el ejemplo anterior, la variación en nuestro estadístico de resumen disminuye a medida que obtenemos más observaciones.</p></li>
<li><p>Existe una correlación positiva entre la habilidad (<code>pb</code>) y las oportunidades para golpear la pelota (<code>ab</code>). Esto se debe a que los equipos controlan quién puede jugar, y obviamente elegirán a sus mejores jugadores.</p></li>
</ol>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="co"># Convierte a tibble para puedas imprimirlo de una manera legible</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2">bateo &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(datos<span class="op">::</span>bateadores)</a>
<a class="sourceLine" id="cb109-3" data-line-number="3"></a>
<a class="sourceLine" id="cb109-4" data-line-number="4">rendimiento_bateadores &lt;-<span class="st"> </span>bateo <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(id_jugador) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb109-7" data-line-number="7">    <span class="dt">pb =</span> <span class="kw">sum</span>(golpes, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(al_bate, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb109-8" data-line-number="8">    <span class="dt">ab =</span> <span class="kw">sum</span>(al_bate, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb109-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb109-10" data-line-number="10"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb109-11" data-line-number="11"></a>
<a class="sourceLine" id="cb109-12" data-line-number="12">rendimiento_bateadores <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-13" data-line-number="13"><span class="st">  </span><span class="kw">filter</span>(ab <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-14" data-line-number="14"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> ab, <span class="dt">y =</span> pb)) <span class="op">+</span></a>
<a class="sourceLine" id="cb109-15" data-line-number="15"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb109-16" data-line-number="16"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb109-17" data-line-number="17"><span class="co">#&gt; `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</span></a></code></pre></div>
<p><img src="05-transform_files/figure-html/unnamed-chunk-43-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Esto también tiene implicaciones importantes para la clasificación. Si ingenuamente ordenas <code>desc(pb)</code>, verás que las personas con los mejores promedios de bateo tienen claramente mucha suerte, pero no son necesariamente hábiles:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1">rendimiento_bateadores <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(pb))</a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="co">#&gt; # A tibble: 19,428 x 3</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"><span class="co">#&gt;   id_jugador    pb    ab</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6"><span class="co">#&gt; 1 abramge01      1     1</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="co">#&gt; 2 alberan01      1     1</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"><span class="co">#&gt; 3 allarko01      1     1</span></a>
<a class="sourceLine" id="cb110-9" data-line-number="9"><span class="co">#&gt; 4 banisje01      1     1</span></a>
<a class="sourceLine" id="cb110-10" data-line-number="10"><span class="co">#&gt; 5 bartocl01      1     1</span></a>
<a class="sourceLine" id="cb110-11" data-line-number="11"><span class="co">#&gt; 6 bassdo01       1     1</span></a>
<a class="sourceLine" id="cb110-12" data-line-number="12"><span class="co">#&gt; # … with 19,422 more rows</span></a></code></pre></div>
<p>Puedes encontrar una buena explicación de este problema en <a href="http://varianceexplained.org/r/empirical_bayes_baseball/" class="uri">http://varianceexplained.org/r/empirical_bayes_baseball/</a> y <a href="http://www.evanmiller.org/how-not-to-sort-by-average-rating.html" class="uri">http://www.evanmiller.org/how-not-to-sort-by-average-rating.html</a>.</p>
</div>
<div id="summarise-funs" class="section level3">
<h3><span class="header-section-number">5.6.4</span> Funciones de resumen útiles</h3>
<p>Solo el uso de medias, conteos y sumas puede llevarte muy lejos, pero R proporciona muchas otras funciones de resumen útiles:</p>
<ul>
<li>Medidas de centralidad: hemos usado <code>mean(x)</code>, pero <code>median(x)</code> también resulta muy útil. La media es la suma dividida por el número de observaciones; la mediana es un valor donde el 50% de <code>x</code> está por encima de él y el 50% está por debajo.
A veces es útil combinar agregación con un subconjunto lógico. Todavía no hemos hablado sobre este tipo de subconjuntos, pero aprenderás más al respecto en [subsetting].</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb111-4" data-line-number="4">    <span class="dt">prom_atraso1 =</span> <span class="kw">mean</span>(atraso_llegada),</a>
<a class="sourceLine" id="cb111-5" data-line-number="5">    <span class="dt">prom_atraso2 =</span> <span class="kw">mean</span>(atraso_llegada[atraso_llegada <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>]) <span class="co"># el promedio de atrasos positivos</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb111-7" data-line-number="7"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb111-8" data-line-number="8"><span class="co">#&gt; # A tibble: 365 x 5</span></a>
<a class="sourceLine" id="cb111-9" data-line-number="9"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb111-10" data-line-number="10"><span class="co">#&gt;    anio   mes   dia prom_atraso1 prom_atraso2</span></a>
<a class="sourceLine" id="cb111-11" data-line-number="11"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;        &lt;dbl&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb111-12" data-line-number="12"><span class="co">#&gt; 1  2013     1     1        12.7          32.5</span></a>
<a class="sourceLine" id="cb111-13" data-line-number="13"><span class="co">#&gt; 2  2013     1     2        12.7          32.0</span></a>
<a class="sourceLine" id="cb111-14" data-line-number="14"><span class="co">#&gt; 3  2013     1     3         5.73         27.7</span></a>
<a class="sourceLine" id="cb111-15" data-line-number="15"><span class="co">#&gt; 4  2013     1     4        -1.93         28.3</span></a>
<a class="sourceLine" id="cb111-16" data-line-number="16"><span class="co">#&gt; 5  2013     1     5        -1.53         22.6</span></a>
<a class="sourceLine" id="cb111-17" data-line-number="17"><span class="co">#&gt; 6  2013     1     6         4.24         24.4</span></a>
<a class="sourceLine" id="cb111-18" data-line-number="18"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<ul>
<li>Medidas de dispersión: <code>sd(x)</code>, <code>IQR(x)</code>, <code>mad(x)</code>. La raíz de la desviación media al cuadrado o desviación estándar <code>sd(x)</code> es una medida estándar de dispersión. El rango intercuartil <code>IQR()</code> y la desviación media absoluta <code>mad(x)</code> son medidas robustas equivalentes que pueden ser más útiles si tienes valores atípicos.</li>
</ul>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="co"># ¿Por qué la distancia a algunos destinos es más variable que la de otros?</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(destino) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">distancia_sd =</span> <span class="kw">sd</span>(distancia)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(distancia_sd))</a>
<a class="sourceLine" id="cb112-6" data-line-number="6"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7"><span class="co">#&gt; # A tibble: 104 x 2</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8"><span class="co">#&gt;   destino distancia_sd</span></a>
<a class="sourceLine" id="cb112-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb112-10" data-line-number="10"><span class="co">#&gt; 1 EGE            10.5 </span></a>
<a class="sourceLine" id="cb112-11" data-line-number="11"><span class="co">#&gt; 2 SAN            10.4 </span></a>
<a class="sourceLine" id="cb112-12" data-line-number="12"><span class="co">#&gt; 3 SFO            10.2 </span></a>
<a class="sourceLine" id="cb112-13" data-line-number="13"><span class="co">#&gt; 4 HNL            10.0 </span></a>
<a class="sourceLine" id="cb112-14" data-line-number="14"><span class="co">#&gt; 5 SEA             9.98</span></a>
<a class="sourceLine" id="cb112-15" data-line-number="15"><span class="co">#&gt; 6 LAS             9.91</span></a>
<a class="sourceLine" id="cb112-16" data-line-number="16"><span class="co">#&gt; # … with 98 more rows</span></a></code></pre></div>
<ul>
<li>Medidas de rango: <code>min(x)</code>, <code>quantile(x, 0.25)</code>, <code>max(x)</code>. Los cuantiles son una generalización de la mediana. Por ejemplo, <code>quantile(x, 0.25)</code> encontrará un valor de <code>x</code> que sea mayor a 25% de los valores, y menor que el 75% restante.</li>
</ul>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="co"># ¿Cuándo salen los primeros y los últimos vuelos cada día?</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">    <span class="dt">primero =</span> <span class="kw">min</span>(horario_salida),</a>
<a class="sourceLine" id="cb113-6" data-line-number="6">    <span class="dt">ultimo =</span> <span class="kw">max</span>(horario_salida)</a>
<a class="sourceLine" id="cb113-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb113-8" data-line-number="8"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb113-9" data-line-number="9"><span class="co">#&gt; # A tibble: 365 x 5</span></a>
<a class="sourceLine" id="cb113-10" data-line-number="10"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb113-11" data-line-number="11"><span class="co">#&gt;    anio   mes   dia primero ultimo</span></a>
<a class="sourceLine" id="cb113-12" data-line-number="12"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb113-13" data-line-number="13"><span class="co">#&gt; 1  2013     1     1     517   2356</span></a>
<a class="sourceLine" id="cb113-14" data-line-number="14"><span class="co">#&gt; 2  2013     1     2      42   2354</span></a>
<a class="sourceLine" id="cb113-15" data-line-number="15"><span class="co">#&gt; 3  2013     1     3      32   2349</span></a>
<a class="sourceLine" id="cb113-16" data-line-number="16"><span class="co">#&gt; 4  2013     1     4      25   2358</span></a>
<a class="sourceLine" id="cb113-17" data-line-number="17"><span class="co">#&gt; 5  2013     1     5      14   2357</span></a>
<a class="sourceLine" id="cb113-18" data-line-number="18"><span class="co">#&gt; 6  2013     1     6      16   2355</span></a>
<a class="sourceLine" id="cb113-19" data-line-number="19"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<ul>
<li>Medidas de posición: <code>first(x)</code>, <code>nth(x, 2)</code>, <code>last(x)</code>. Estas trabajan de forma similar a <code>x[1]</code>, <code>x[2]</code> y <code>x[length (x)]</code>, pero te permiten establecer un valor predeterminado en el caso de que esa posición no exista (es decir, si estás tratando de obtener el tercer elemento de un grupo que solo tiene dos elementos). Por ejemplo, podemos encontrar la primera (<em>first</em>) y última (<em>last</em>) salida para cada día:</li>
</ul>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb114-4" data-line-number="4">    <span class="dt">primera_salida =</span> <span class="kw">first</span>(horario_salida), </a>
<a class="sourceLine" id="cb114-5" data-line-number="5">    <span class="dt">ultima_salida =</span> <span class="kw">last</span>(horario_salida)</a>
<a class="sourceLine" id="cb114-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb114-7" data-line-number="7"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb114-8" data-line-number="8"><span class="co">#&gt; # A tibble: 365 x 5</span></a>
<a class="sourceLine" id="cb114-9" data-line-number="9"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb114-10" data-line-number="10"><span class="co">#&gt;    anio   mes   dia primera_salida ultima_salida</span></a>
<a class="sourceLine" id="cb114-11" data-line-number="11"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;</span></a>
<a class="sourceLine" id="cb114-12" data-line-number="12"><span class="co">#&gt; 1  2013     1     1            517          2356</span></a>
<a class="sourceLine" id="cb114-13" data-line-number="13"><span class="co">#&gt; 2  2013     1     2             42          2354</span></a>
<a class="sourceLine" id="cb114-14" data-line-number="14"><span class="co">#&gt; 3  2013     1     3             32          2349</span></a>
<a class="sourceLine" id="cb114-15" data-line-number="15"><span class="co">#&gt; 4  2013     1     4             25          2358</span></a>
<a class="sourceLine" id="cb114-16" data-line-number="16"><span class="co">#&gt; 5  2013     1     5             14          2357</span></a>
<a class="sourceLine" id="cb114-17" data-line-number="17"><span class="co">#&gt; 6  2013     1     6             16          2355</span></a>
<a class="sourceLine" id="cb114-18" data-line-number="18"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
<p>Estas funciones son complementarias al filtrado en rangos. El filtrado te proporciona todas las variables, con cada observación en una fila distinta:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">r =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(horario_salida))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(r <span class="op">%in%</span><span class="st"> </span><span class="kw">range</span>(r))</a>
<a class="sourceLine" id="cb115-5" data-line-number="5"><span class="co">#&gt; # A tibble: 770 x 20</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6"><span class="co">#&gt; # Groups:   anio, mes, dia [365]</span></a>
<a class="sourceLine" id="cb115-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb115-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb115-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb115-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     1           2356             2359            -3</span></a>
<a class="sourceLine" id="cb115-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     2             42             2359            43</span></a>
<a class="sourceLine" id="cb115-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     2           2354             2359            -5</span></a>
<a class="sourceLine" id="cb115-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     3             32             2359            33</span></a>
<a class="sourceLine" id="cb115-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     3           2349             2359           -10</span></a>
<a class="sourceLine" id="cb115-15" data-line-number="15"><span class="co">#&gt; # … with 764 more rows, and 14 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb115-16" data-line-number="16"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb115-17" data-line-number="17"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb115-18" data-line-number="18"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb115-19" data-line-number="19"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;, r &lt;int&gt;</span></a></code></pre></div>
<ul>
<li>Conteos: has visto <code>n()</code>, que no toma argumentos y que devuelve el tamaño del grupo actual. Para contar la cantidad de valores no faltantes, usa <code>sum(!is.na (x))</code>. Para contar la cantidad de valores distintos (únicos), usa <code>n_distinct(x)</code>.</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="co"># ¿Qué destinos tienen la mayoría de las aerolíneas?</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(destino) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">aerolineas =</span> <span class="kw">n_distinct</span>(aerolinea)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-5" data-line-number="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(aerolineas))</a>
<a class="sourceLine" id="cb116-6" data-line-number="6"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb116-7" data-line-number="7"><span class="co">#&gt; # A tibble: 104 x 2</span></a>
<a class="sourceLine" id="cb116-8" data-line-number="8"><span class="co">#&gt;   destino aerolineas</span></a>
<a class="sourceLine" id="cb116-9" data-line-number="9"><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb116-10" data-line-number="10"><span class="co">#&gt; 1 ATL              7</span></a>
<a class="sourceLine" id="cb116-11" data-line-number="11"><span class="co">#&gt; 2 BOS              7</span></a>
<a class="sourceLine" id="cb116-12" data-line-number="12"><span class="co">#&gt; 3 CLT              7</span></a>
<a class="sourceLine" id="cb116-13" data-line-number="13"><span class="co">#&gt; 4 ORD              7</span></a>
<a class="sourceLine" id="cb116-14" data-line-number="14"><span class="co">#&gt; 5 TPA              7</span></a>
<a class="sourceLine" id="cb116-15" data-line-number="15"><span class="co">#&gt; 6 AUS              6</span></a>
<a class="sourceLine" id="cb116-16" data-line-number="16"><span class="co">#&gt; # … with 98 more rows</span></a></code></pre></div>
<p>Los conteos son tan útiles que <strong>dplyr</strong> proporciona un ayudante simple si todo lo que quieres es un conteo:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(destino)</a>
<a class="sourceLine" id="cb117-3" data-line-number="3"><span class="co">#&gt; # A tibble: 104 x 2</span></a>
<a class="sourceLine" id="cb117-4" data-line-number="4"><span class="co">#&gt;   destino     n</span></a>
<a class="sourceLine" id="cb117-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb117-6" data-line-number="6"><span class="co">#&gt; 1 ABQ       254</span></a>
<a class="sourceLine" id="cb117-7" data-line-number="7"><span class="co">#&gt; 2 ACK       264</span></a>
<a class="sourceLine" id="cb117-8" data-line-number="8"><span class="co">#&gt; 3 ALB       418</span></a>
<a class="sourceLine" id="cb117-9" data-line-number="9"><span class="co">#&gt; 4 ANC         8</span></a>
<a class="sourceLine" id="cb117-10" data-line-number="10"><span class="co">#&gt; 5 ATL     16837</span></a>
<a class="sourceLine" id="cb117-11" data-line-number="11"><span class="co">#&gt; 6 AUS      2411</span></a>
<a class="sourceLine" id="cb117-12" data-line-number="12"><span class="co">#&gt; # … with 98 more rows</span></a></code></pre></div>
<p>Opcionalmente puedes proporcionar una variable de ponderación. Por ejemplo, podrías usar esto para “contar” (sumar) el número total de millas que voló un avión:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(codigo_cola, <span class="dt">wt =</span> distancia)</a>
<a class="sourceLine" id="cb118-3" data-line-number="3"><span class="co">#&gt; # A tibble: 4,037 x 2</span></a>
<a class="sourceLine" id="cb118-4" data-line-number="4"><span class="co">#&gt;   codigo_cola      n</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6"><span class="co">#&gt; 1 D942DN        3418</span></a>
<a class="sourceLine" id="cb118-7" data-line-number="7"><span class="co">#&gt; 2 N0EGMQ      239143</span></a>
<a class="sourceLine" id="cb118-8" data-line-number="8"><span class="co">#&gt; 3 N10156      109664</span></a>
<a class="sourceLine" id="cb118-9" data-line-number="9"><span class="co">#&gt; 4 N102UW       25722</span></a>
<a class="sourceLine" id="cb118-10" data-line-number="10"><span class="co">#&gt; 5 N103US       24619</span></a>
<a class="sourceLine" id="cb118-11" data-line-number="11"><span class="co">#&gt; 6 N104UW       24616</span></a>
<a class="sourceLine" id="cb118-12" data-line-number="12"><span class="co">#&gt; # … with 4,031 more rows</span></a></code></pre></div>
<ul>
<li>Conteos y proporciones de valores lógicos: <code>sum(x &gt; 10)</code>, <code>mean(y == 0)</code>. Cuando se usan con funciones numéricas, <code>TRUE</code> se convierte en 1 y <code>FALSE</code> en 0. Esto hace que <code>sum()</code> y <code>mean()</code> sean muy útiles: <code>sum(x)</code> te da la cantidad de <code>TRUE</code> en <code>x</code>, y <code>mean(x)</code> te da la proporción.</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="co"># ¿Cuántos vuelos salieron antes de las 5 am? </span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="co"># (estos generalmente son vuelos demorados del día anterior)</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb119-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n_temprano =</span> <span class="kw">sum</span>(horario_salida <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>))</a>
<a class="sourceLine" id="cb119-6" data-line-number="6"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb119-7" data-line-number="7"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb119-8" data-line-number="8"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb119-9" data-line-number="9"><span class="co">#&gt;    anio   mes   dia n_temprano</span></a>
<a class="sourceLine" id="cb119-10" data-line-number="10"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb119-11" data-line-number="11"><span class="co">#&gt; 1  2013     1     1          0</span></a>
<a class="sourceLine" id="cb119-12" data-line-number="12"><span class="co">#&gt; 2  2013     1     2          3</span></a>
<a class="sourceLine" id="cb119-13" data-line-number="13"><span class="co">#&gt; 3  2013     1     3          4</span></a>
<a class="sourceLine" id="cb119-14" data-line-number="14"><span class="co">#&gt; 4  2013     1     4          3</span></a>
<a class="sourceLine" id="cb119-15" data-line-number="15"><span class="co">#&gt; 5  2013     1     5          3</span></a>
<a class="sourceLine" id="cb119-16" data-line-number="16"><span class="co">#&gt; 6  2013     1     6          2</span></a>
<a class="sourceLine" id="cb119-17" data-line-number="17"><span class="co">#&gt; # … with 359 more rows</span></a>
<a class="sourceLine" id="cb119-18" data-line-number="18"></a>
<a class="sourceLine" id="cb119-19" data-line-number="19"><span class="co"># ¿Qué proporción de vuelos se retrasan más de una hora?</span></a>
<a class="sourceLine" id="cb119-20" data-line-number="20">no_cancelados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb119-21" data-line-number="21"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb119-22" data-line-number="22"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">hora_prop =</span> <span class="kw">mean</span>(atraso_llegada <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>))</a>
<a class="sourceLine" id="cb119-23" data-line-number="23"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb119-24" data-line-number="24"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb119-25" data-line-number="25"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb119-26" data-line-number="26"><span class="co">#&gt;    anio   mes   dia hora_prop</span></a>
<a class="sourceLine" id="cb119-27" data-line-number="27"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb119-28" data-line-number="28"><span class="co">#&gt; 1  2013     1     1    0.0722</span></a>
<a class="sourceLine" id="cb119-29" data-line-number="29"><span class="co">#&gt; 2  2013     1     2    0.0851</span></a>
<a class="sourceLine" id="cb119-30" data-line-number="30"><span class="co">#&gt; 3  2013     1     3    0.0567</span></a>
<a class="sourceLine" id="cb119-31" data-line-number="31"><span class="co">#&gt; 4  2013     1     4    0.0396</span></a>
<a class="sourceLine" id="cb119-32" data-line-number="32"><span class="co">#&gt; 5  2013     1     5    0.0349</span></a>
<a class="sourceLine" id="cb119-33" data-line-number="33"><span class="co">#&gt; 6  2013     1     6    0.0470</span></a>
<a class="sourceLine" id="cb119-34" data-line-number="34"><span class="co">#&gt; # … with 359 more rows</span></a></code></pre></div>
</div>
<div id="agrupación-por-múltiples-variables" class="section level3">
<h3><span class="header-section-number">5.6.5</span> Agrupación por múltiples variables</h3>
<p>Cuando agrupas por múltiples variables, cada resumen se desprende de un nivel de la agrupación. Eso hace que sea más fácil acumular progresivamente en un conjunto de datos:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1">diario &lt;-<span class="st"> </span><span class="kw">group_by</span>(vuelos, anio, mes, dia)</a>
<a class="sourceLine" id="cb120-2" data-line-number="2">(por_dia   &lt;-<span class="st"> </span><span class="kw">summarise</span>(diario, <span class="dt">vuelos =</span> <span class="kw">n</span>()))</a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39;, &#39;mes&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4"><span class="co">#&gt; # A tibble: 365 x 4</span></a>
<a class="sourceLine" id="cb120-5" data-line-number="5"><span class="co">#&gt; # Groups:   anio, mes [12]</span></a>
<a class="sourceLine" id="cb120-6" data-line-number="6"><span class="co">#&gt;    anio   mes   dia vuelos</span></a>
<a class="sourceLine" id="cb120-7" data-line-number="7"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb120-8" data-line-number="8"><span class="co">#&gt; 1  2013     1     1    842</span></a>
<a class="sourceLine" id="cb120-9" data-line-number="9"><span class="co">#&gt; 2  2013     1     2    943</span></a>
<a class="sourceLine" id="cb120-10" data-line-number="10"><span class="co">#&gt; 3  2013     1     3    914</span></a>
<a class="sourceLine" id="cb120-11" data-line-number="11"><span class="co">#&gt; 4  2013     1     4    915</span></a>
<a class="sourceLine" id="cb120-12" data-line-number="12"><span class="co">#&gt; 5  2013     1     5    720</span></a>
<a class="sourceLine" id="cb120-13" data-line-number="13"><span class="co">#&gt; 6  2013     1     6    832</span></a>
<a class="sourceLine" id="cb120-14" data-line-number="14"><span class="co">#&gt; # … with 359 more rows</span></a>
<a class="sourceLine" id="cb120-15" data-line-number="15">(por_mes &lt;-<span class="st"> </span><span class="kw">summarise</span>(por_dia, <span class="dt">vuelos =</span> <span class="kw">sum</span>(vuelos)))</a>
<a class="sourceLine" id="cb120-16" data-line-number="16"><span class="co">#&gt; `summarise()` regrouping output by &#39;anio&#39; (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb120-17" data-line-number="17"><span class="co">#&gt; # A tibble: 12 x 3</span></a>
<a class="sourceLine" id="cb120-18" data-line-number="18"><span class="co">#&gt; # Groups:   anio [1]</span></a>
<a class="sourceLine" id="cb120-19" data-line-number="19"><span class="co">#&gt;    anio   mes vuelos</span></a>
<a class="sourceLine" id="cb120-20" data-line-number="20"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb120-21" data-line-number="21"><span class="co">#&gt; 1  2013     1  27004</span></a>
<a class="sourceLine" id="cb120-22" data-line-number="22"><span class="co">#&gt; 2  2013     2  24951</span></a>
<a class="sourceLine" id="cb120-23" data-line-number="23"><span class="co">#&gt; 3  2013     3  28834</span></a>
<a class="sourceLine" id="cb120-24" data-line-number="24"><span class="co">#&gt; 4  2013     4  28330</span></a>
<a class="sourceLine" id="cb120-25" data-line-number="25"><span class="co">#&gt; 5  2013     5  28796</span></a>
<a class="sourceLine" id="cb120-26" data-line-number="26"><span class="co">#&gt; 6  2013     6  28243</span></a>
<a class="sourceLine" id="cb120-27" data-line-number="27"><span class="co">#&gt; # … with 6 more rows</span></a>
<a class="sourceLine" id="cb120-28" data-line-number="28">(por_anio  &lt;-<span class="st"> </span><span class="kw">summarise</span>(por_mes, <span class="dt">vuelos =</span> <span class="kw">sum</span>(vuelos)))</a>
<a class="sourceLine" id="cb120-29" data-line-number="29"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb120-30" data-line-number="30"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb120-31" data-line-number="31"><span class="co">#&gt;    anio vuelos</span></a>
<a class="sourceLine" id="cb120-32" data-line-number="32"><span class="co">#&gt;   &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb120-33" data-line-number="33"><span class="co">#&gt; 1  2013 336776</span></a></code></pre></div>
<p>Ten cuidado al acumular resúmenes progresivamente: está bien para las sumas y los recuentos, pero debes pensar en la ponderación de las medias y las varianzas, además de que no es posible hacerlo exactamente para estadísticas basadas en rangos como la mediana. En otras palabras, la suma de las sumas agrupadas es la suma total, pero la mediana de las medianas agrupadas no es la mediana general.</p>
</div>
<div id="desagrupar" class="section level3">
<h3><span class="header-section-number">5.6.6</span> Desagrupar</h3>
<p>Si necesitas eliminar la agrupación y regresar a las operaciones en datos desagrupados, usa <code>ungroup()</code>.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1">diario <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st">             </span><span class="co"># ya no está agrupado por fecha</span></a>
<a class="sourceLine" id="cb121-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">vuelos =</span> <span class="kw">n</span>())   <span class="co"># todos los vuelos</span></a>
<a class="sourceLine" id="cb121-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb121-5" data-line-number="5"><span class="co">#&gt;   vuelos</span></a>
<a class="sourceLine" id="cb121-6" data-line-number="6"><span class="co">#&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb121-7" data-line-number="7"><span class="co">#&gt; 1 336776</span></a></code></pre></div>
</div>
<div id="ejercicios-12" class="section level3">
<h3><span class="header-section-number">5.6.7</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li>Haz una lluvia de ideas de al menos 5 formas diferentes de evaluar las características de un retraso típico de un grupo de vuelos. Considera los siguientes escenarios:</li>
</ol>
<pre><code>* Un vuelo llega 15 minutos antes 50% del tiempo, y 15 minutos tarde 50% del tiempo.

* Un vuelo llega siempre 10 minutos tarde.

* Un vuelo llega 30 minutos antes 50% del tiempo, y 30 minutos tarde 50% del tiempo.

* Un vuelo llega a tiempo en el 99% de los casos. 1% de las veces llega 2 horas tarde.

¿Qué es más importante: retraso de la llegada o demora de salida?</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>Sugiere un nuevo enfoque que te dé el mismo <em>output</em> que <code>no_cancelados %&gt;% count(destino)</code> y
<code>no_cancelado %&gt;% count(codigo_cola, wt = distancia)</code> (sin usar <code>count()</code>).</p></li>
<li><p>Nuestra definición de vuelos cancelados (<code>is.na(atraso_salida) | is.na (atraso_llegada)</code>) es un poco subóptima. ¿Por qué? ¿Cuál es la columna más importante?</p></li>
<li><p>Mira la cantidad de vuelos cancelados por día. ¿Hay un patrón? ¿La proporción de vuelos cancelados está relacionada con el retraso promedio?</p></li>
<li><p>¿Qué compañía tiene los peores retrasos? Desafío: ¿puedes desenredar el efecto de malos aeropuertos vs. el efecto de malas aerolíneas? ¿Por qué o por qué no? (Sugerencia: piensa en <code>vuelos %&gt;% group_by(aerolinea, destino) %&gt;% summarise(n())</code>)</p></li>
<li><p>¿Qué hace el argumento <code>sort</code> a <code>count()</code>. ¿Cuándo podrías usarlo?</p></li>
</ol>
</div>
</div>
<div id="transformaciones-agrupadas-y-filtros" class="section level2">
<h2><span class="header-section-number">5.7</span> Transformaciones agrupadas (y filtros)</h2>
<p>La agrupación es más útil si se utiliza junto con <code>summarise()</code>, pero también puedes hacer operaciones convenientes con <code>mutate()</code> y <code>filter()</code>:</p>
<ul>
<li>Encuentra los peores miembros de cada grupo:</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1">vuelos_sml <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(anio, mes, dia) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb123-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">rank</span>(<span class="kw">desc</span>(atraso_llegada)) <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb123-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3,306 x 7</span></a>
<a class="sourceLine" id="cb123-5" data-line-number="5"><span class="co">#&gt; # Groups:   anio, mes, dia [365]</span></a>
<a class="sourceLine" id="cb123-6" data-line-number="6"><span class="co">#&gt;    anio   mes   dia atraso_salida atraso_llegada distancia tiempo_vuelo</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb123-8" data-line-number="8"><span class="co">#&gt; 1  2013     1     1           853            851       184           41</span></a>
<a class="sourceLine" id="cb123-9" data-line-number="9"><span class="co">#&gt; 2  2013     1     1           290            338      1134          213</span></a>
<a class="sourceLine" id="cb123-10" data-line-number="10"><span class="co">#&gt; 3  2013     1     1           260            263       266           46</span></a>
<a class="sourceLine" id="cb123-11" data-line-number="11"><span class="co">#&gt; 4  2013     1     1           157            174       213           60</span></a>
<a class="sourceLine" id="cb123-12" data-line-number="12"><span class="co">#&gt; 5  2013     1     1           216            222       708          121</span></a>
<a class="sourceLine" id="cb123-13" data-line-number="13"><span class="co">#&gt; 6  2013     1     1           255            250       589          115</span></a>
<a class="sourceLine" id="cb123-14" data-line-number="14"><span class="co">#&gt; # … with 3,300 more rows</span></a></code></pre></div>
<ul>
<li>Encuentra todos los grupos más grandes que un determinado umbral:</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">popular_destinos &lt;-<span class="st"> </span>vuelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(destino) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">365</span>)</a>
<a class="sourceLine" id="cb124-4" data-line-number="4">popular_destinos</a>
<a class="sourceLine" id="cb124-5" data-line-number="5"><span class="co">#&gt; # A tibble: 332,577 x 19</span></a>
<a class="sourceLine" id="cb124-6" data-line-number="6"><span class="co">#&gt; # Groups:   destino [77]</span></a>
<a class="sourceLine" id="cb124-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia horario_salida salida_programa… atraso_salida</span></a>
<a class="sourceLine" id="cb124-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;            &lt;int&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb124-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1            517              515             2</span></a>
<a class="sourceLine" id="cb124-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     1            533              529             4</span></a>
<a class="sourceLine" id="cb124-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     1            542              540             2</span></a>
<a class="sourceLine" id="cb124-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     1            544              545            -1</span></a>
<a class="sourceLine" id="cb124-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     1            554              600            -6</span></a>
<a class="sourceLine" id="cb124-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     1            554              558            -4</span></a>
<a class="sourceLine" id="cb124-15" data-line-number="15"><span class="co">#&gt; # … with 332,571 more rows, and 13 more variables: horario_llegada &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb124-16" data-line-number="16"><span class="co">#&gt; #   llegada_programada &lt;int&gt;, atraso_llegada &lt;dbl&gt;, aerolinea &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb124-17" data-line-number="17"><span class="co">#&gt; #   vuelo &lt;int&gt;, codigo_cola &lt;chr&gt;, origen &lt;chr&gt;, destino &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb124-18" data-line-number="18"><span class="co">#&gt; #   tiempo_vuelo &lt;dbl&gt;, distancia &lt;dbl&gt;, hora &lt;dbl&gt;, minuto &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb124-19" data-line-number="19"><span class="co">#&gt; #   fecha_hora &lt;dttm&gt;</span></a></code></pre></div>
<ul>
<li>Estandariza para calcular las métricas por grupo:</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">popular_destinos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(atraso_llegada <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb125-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_atraso =</span> atraso_llegada <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(atraso_llegada)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(anio<span class="op">:</span>dia, destino, atraso_llegada, prop_atraso)</a>
<a class="sourceLine" id="cb125-5" data-line-number="5"><span class="co">#&gt; # A tibble: 131,106 x 6</span></a>
<a class="sourceLine" id="cb125-6" data-line-number="6"><span class="co">#&gt; # Groups:   destino [77]</span></a>
<a class="sourceLine" id="cb125-7" data-line-number="7"><span class="co">#&gt;    anio   mes   dia destino atraso_llegada prop_atraso</span></a>
<a class="sourceLine" id="cb125-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb125-9" data-line-number="9"><span class="co">#&gt; 1  2013     1     1 IAH                 11   0.000111 </span></a>
<a class="sourceLine" id="cb125-10" data-line-number="10"><span class="co">#&gt; 2  2013     1     1 IAH                 20   0.000201 </span></a>
<a class="sourceLine" id="cb125-11" data-line-number="11"><span class="co">#&gt; 3  2013     1     1 MIA                 33   0.000235 </span></a>
<a class="sourceLine" id="cb125-12" data-line-number="12"><span class="co">#&gt; 4  2013     1     1 ORD                 12   0.0000424</span></a>
<a class="sourceLine" id="cb125-13" data-line-number="13"><span class="co">#&gt; 5  2013     1     1 FLL                 19   0.0000938</span></a>
<a class="sourceLine" id="cb125-14" data-line-number="14"><span class="co">#&gt; 6  2013     1     1 ORD                  8   0.0000283</span></a>
<a class="sourceLine" id="cb125-15" data-line-number="15"><span class="co">#&gt; # … with 131,100 more rows</span></a></code></pre></div>
<p>Un filtro agrupado es una transformación agrupada seguida de un filtro desagrupado. En general, preferimos evitarlos, excepto para las manipulaciones rápidas y sucias: de lo contrario, es difícil comprobar que has hecho la manipulación correctamente.</p>
<p>Las funciones que trabajan de forma más natural en transformaciones agrupadas y filtros se conocen como funciones de ventana o <em>window functions</em> (frente a las funciones de resumen utilizadas para los resúmenes). Puedes obtener más información sobre las funciones de ventana útiles en la viñeta correspondiente: <code>vignette(&quot;window-functions&quot;)</code>.</p>
<div id="ejercicios-13" class="section level3">
<h3><span class="header-section-number">5.7.1</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Remítete a las listas de funciones útiles de mutación y filtrado. Describe cómo cambia cada operación cuando las combinas con la agrupación.</p></li>
<li><p>¿Qué avión (<code>codigo_cola</code>) tiene el peor registro de tiempo?</p></li>
<li><p>¿A qué hora del día deberías volar si quieres evitar lo más posible los retrasos?</p></li>
<li><p>Para cada destino, calcula los minutos totales de demora. Para cada vuelo, calcula la proporción de la demora total para su destino.</p></li>
<li><p>Los retrasos suelen estar temporalmente correlacionados: incluso una vez que el problema que causó el retraso inicial se ha resuelto, los vuelos posteriores se retrasan para permitir que salgan los vuelos anteriores. Usando <code>lag()</code>, explora cómo el retraso de un vuelo está relacionado con el retraso del vuelo inmediatamente anterior.</p></li>
<li><p>Mira cada destino. ¿Puedes encontrar vuelos sospechosamente rápidos? (es decir, vuelos que representan un posible error de entrada de datos). Calcula el tiempo en el aire de un vuelo relativo al vuelo más corto a ese destino. ¿Cuáles vuelos se retrasaron más en el aire?</p></li>
<li><p>Encuentra todos los destinos que son volados por al menos dos operadores. Usa esta información para clasificar a las aerolíneas.</p></li>
<li><p>Para cada avión, cuenta el número de vuelos antes del primer retraso de más de 1 hora.</p></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="flujo-de-trabajo-conocimientos-básicos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="flujo-de-trabajo-scripts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cienciadedatos/r4ds/edit/master/05-transform.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
